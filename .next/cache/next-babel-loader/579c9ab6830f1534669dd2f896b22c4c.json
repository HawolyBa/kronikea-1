{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Utilisateur\\\\Documents\\\\CODE\\\\kronikea-master\\\\components\\\\forms\\\\Tags.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { Tag, Tooltip } from \"antd\";\nimport { PlusOutlined } from \"@ant-design/icons\";\n\nconst Tags = ({\n  tags,\n  setTags,\n  storyInfo\n}) => {\n  const inputButton = React.useRef();\n  const editInputButton = React.useRef();\n  const [inputVisible, setInputVisible] = React.useState(false);\n  const [inputValue, setInputValue] = React.useState(\"\");\n  const [editInputIndex, setEditInputIndex] = React.useState(-1);\n  const [editInputValue, setEditInputValue] = React.useState(\"\");\n\n  const handleClose = removedTag => setTags(_objectSpread(_objectSpread({}, storyInfo), {}, {\n    tags: tags.filter(tag => tag !== removedTag)\n  }));\n\n  const showInput = () => {\n    var _inputButton$current;\n\n    setInputVisible(true);\n    inputButton === null || inputButton === void 0 ? void 0 : (_inputButton$current = inputButton.current) === null || _inputButton$current === void 0 ? void 0 : _inputButton$current.focus(); //editInputButton.current.focus();\n    //;\n  };\n\n  const handleInputChange = e => setInputValue(e.target.value);\n\n  const handleInputConfirm = () => {\n    let newTags = tags;\n\n    if (inputValue && tags.indexOf(inputValue) === -1) {\n      newTags = [...newTags, inputValue];\n    }\n\n    setTags(_objectSpread(_objectSpread({}, storyInfo), {}, {\n      tags: newTags\n    }));\n    setInputValue(\"\");\n    setInputVisible(false);\n  };\n\n  const handleEditInputChange = e => setEditInputValue(e.target.value);\n\n  const handleEditInputConfirm = () => {\n    const newTags = [...tags];\n    newTags[editInputIndex] = editInputValue;\n    setTags(_objectSpread(_objectSpread({}, storyInfo), {}, {\n      tags: newTags\n    }));\n    setEditInputIndex(-1);\n    setEditInputValue(\"\");\n  };\n\n  const keyPress = e => {\n    console.log(e.key);\n  };\n\n  return __jsx(React.Fragment, null, tags === null || tags === void 0 ? void 0 : tags.map((tag, i) => {\n    if (editInputIndex === i) {\n      return __jsx(\"input\", {\n        key: i,\n        onChange: handleEditInputChange,\n        onBlur: handleEditInputConfirm,\n        onPressEnter: handleEditInputConfirm,\n        value: editInputValue,\n        ref: editInputButton,\n        className: \"form-input\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 13\n        }\n      });\n    }\n\n    const isLongTag = tag.length > 20;\n\n    const TagElem = __jsx(Tag, {\n      onClose: () => handleClose(tag),\n      closable: true,\n      key: tag,\n      className: \"edit-tag\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }\n    }, __jsx(\"span\", {\n      onDoubleClick: e => {\n        if (i !== 0) {\n          setEditInputIndex(i);\n          setEditInputValue(tag);\n          editInputButton.focus();\n          e.preventDefault();\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 13\n      }\n    }, isLongTag ? `#${tag.slice(0, 20)}...` : `#${tag}`));\n\n    return isLongTag ? __jsx(Tooltip, {\n      title: tag,\n      key: tag,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }\n    }, TagElem) : TagElem;\n  }), inputVisible && __jsx(\"input\", {\n    onChange: handleInputChange,\n    onBlur: handleInputConfirm,\n    onKeyDown: e => {\n      if (e.key === \"Enter\") {\n        handleInputConfirm();\n      }\n    },\n    value: inputValue,\n    type: \"text\",\n    ref: inputButton,\n    className: \"tag-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }), !inputVisible && __jsx(Tag, {\n    className: \"site-tag-plus\",\n    onClick: showInput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }\n  }, __jsx(PlusOutlined, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 11\n    }\n  }), \" New Tag\"));\n};\n\nexport default Tags;","map":{"version":3,"sources":["C:/Users/Utilisateur/Documents/CODE/kronikea-master/components/forms/Tags.js"],"names":["Tag","Tooltip","PlusOutlined","Tags","tags","setTags","storyInfo","inputButton","React","useRef","editInputButton","inputVisible","setInputVisible","useState","inputValue","setInputValue","editInputIndex","setEditInputIndex","editInputValue","setEditInputValue","handleClose","removedTag","filter","tag","showInput","current","focus","handleInputChange","e","target","value","handleInputConfirm","newTags","indexOf","handleEditInputChange","handleEditInputConfirm","keyPress","console","log","key","map","i","isLongTag","length","TagElem","preventDefault","slice"],"mappings":"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","sourcesContent":["import { Tag, Tooltip } from \"antd\";\r\nimport { PlusOutlined } from \"@ant-design/icons\";\r\n\r\nconst Tags = ({ tags, setTags, storyInfo }) => {\r\n  const inputButton = React.useRef();\r\n  const editInputButton = React.useRef();\r\n  const [inputVisible, setInputVisible] = React.useState(false);\r\n  const [inputValue, setInputValue] = React.useState(\"\");\r\n  const [editInputIndex, setEditInputIndex] = React.useState(-1);\r\n  const [editInputValue, setEditInputValue] = React.useState(\"\");\r\n\r\n  const handleClose = (removedTag) =>\r\n    setTags({ ...storyInfo, tags: tags.filter((tag) => tag !== removedTag) });\r\n\r\n  const showInput = () => {\r\n    setInputVisible(true);\r\n    inputButton?.current?.focus();\r\n    //editInputButton.current.focus();\r\n    //;\r\n  };\r\n\r\n  const handleInputChange = (e) => setInputValue(e.target.value);\r\n\r\n  const handleInputConfirm = () => {\r\n    let newTags = tags;\r\n    if (inputValue && tags.indexOf(inputValue) === -1) {\r\n      newTags = [...newTags, inputValue];\r\n    }\r\n\r\n    setTags({ ...storyInfo, tags: newTags });\r\n    setInputValue(\"\");\r\n    setInputVisible(false);\r\n  };\r\n\r\n  const handleEditInputChange = (e) => setEditInputValue(e.target.value);\r\n\r\n  const handleEditInputConfirm = () => {\r\n    const newTags = [...tags];\r\n    newTags[editInputIndex] = editInputValue;\r\n    setTags({ ...storyInfo, tags: newTags });\r\n    setEditInputIndex(-1);\r\n    setEditInputValue(\"\");\r\n  };\r\n\r\n  const keyPress = (e) => {\r\n    console.log(e.key);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {tags?.map((tag, i) => {\r\n        if (editInputIndex === i) {\r\n          return (\r\n            <input\r\n              key={i}\r\n              onChange={handleEditInputChange}\r\n              onBlur={handleEditInputConfirm}\r\n              onPressEnter={handleEditInputConfirm}\r\n              value={editInputValue}\r\n              ref={editInputButton}\r\n              className=\"form-input\"\r\n            />\r\n          );\r\n        }\r\n        const isLongTag = tag.length > 20;\r\n        const TagElem = (\r\n          <Tag\r\n            onClose={() => handleClose(tag)}\r\n            closable={true}\r\n            key={tag}\r\n            className=\"edit-tag\"\r\n          >\r\n            <span\r\n              onDoubleClick={(e) => {\r\n                if (i !== 0) {\r\n                  setEditInputIndex(i);\r\n                  setEditInputValue(tag);\r\n                  editInputButton.focus();\r\n                  e.preventDefault();\r\n                }\r\n              }}\r\n            >\r\n              {isLongTag ? `#${tag.slice(0, 20)}...` : `#${tag}`}\r\n            </span>\r\n          </Tag>\r\n        );\r\n        return isLongTag ? (\r\n          <Tooltip title={tag} key={tag}>\r\n            {TagElem}\r\n          </Tooltip>\r\n        ) : (\r\n          TagElem\r\n        );\r\n      })}\r\n      {inputVisible && (\r\n        <input\r\n          onChange={handleInputChange}\r\n          onBlur={handleInputConfirm}\r\n          onKeyDown={(e) => {\r\n            if (e.key === \"Enter\") {\r\n              handleInputConfirm();\r\n            }\r\n          }}\r\n          value={inputValue}\r\n          type=\"text\"\r\n          ref={inputButton}\r\n          className=\"tag-input\"\r\n        />\r\n      )}\r\n      {!inputVisible && (\r\n        <Tag className=\"site-tag-plus\" onClick={showInput}>\r\n          <PlusOutlined /> New Tag\r\n        </Tag>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Tags;\r\n"]},"metadata":{},"sourceType":"module"}