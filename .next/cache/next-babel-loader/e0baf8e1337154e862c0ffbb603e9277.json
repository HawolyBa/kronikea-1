{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Utilisateur\\\\Documents\\\\CODE\\\\kronikea-master\\\\pages\\\\character\\\\[id]\\\\index.js\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { connect } from \"react-redux\";\nimport { Row, Col, Image, Divider, Space, Empty, Descriptions } from \"antd\";\nimport { dummy } from \"../../../utils/dummy\";\nimport { getCharacter, getUserCharacters } from \"../../../redux/actions/charactersActions\";\nimport Comments from \"../../../components/chapter/Comments\";\nimport CharacterCard from \"../../../components/common/CharacterCard\";\nimport LoadingScreen from \"../../../components/hoc/LoadingScreen\";\nimport RedirectComp from \"../../../components/hoc/RedirectComp\";\nimport { useAuth } from \"../../../hooks/userHooks\";\nimport WithLink from \"../../../components/hoc/withLink\";\nimport { CharacterGrid } from \"../../../components/common/Grid\";\n\nconst Character = props => {\n  const {\n    character,\n    loading,\n    charaExists,\n    userCharacters\n  } = props;\n  const router = useRouter();\n  const auth = useAuth();\n  const [relatives, setRelatives] = React.useState([]);\n  React.useEffect(() => {\n    props.getCharacter(router.query.id);\n  }, [router.query.id]);\n  React.useEffect(() => {\n    if (character.authorId && character.public || auth.user && character.authorId === auth.user.uid) {\n      props.getUserCharacters(character.authorId);\n    }\n  }, [character, auth]);\n  React.useEffect(() => {\n    if (userCharacters.length > 0 && character.relatives.length > 0) {\n      setRelatives(character.relatives.map(c => ({\n        firstname: userCharacters.find(char => char.id === c.character_id).firstname,\n        lastname: userCharacters.find(char => char.id === c.character_id).lastname,\n        image: userCharacters.find(char => char.id === c.character_id).image,\n        id: userCharacters.find(char => char.id === c.character_id).id,\n        relation: c.relation,\n        public: userCharacters.find(char => char.id === c.character_id).public\n      })).filter(c => auth.user.uid !== character.authorId ? c.public : c));\n    }\n  }, [userCharacters]);\n  return __jsx(LoadingScreen, {\n    loading: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }\n  }, __jsx(RedirectComp, {\n    type: \"404\",\n    condition: charaExists,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, __jsx(RedirectComp, {\n    type: \"403\",\n    condition: character.public || character.authorId === auth.user.uid,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"main-character\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  }, __jsx(\"section\", {\n    className: \"character-page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"character-meta\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 15\n    }\n  }, __jsx(Link, {\n    href: \"/profile/1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  }, __jsx(\"a\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 19\n    }\n  }, __jsx(Space, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 21\n    }\n  }, __jsx(\"div\", {\n    className: \"avatar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 23\n    }\n  }, __jsx(\"img\", {\n    src: character.authorImage ? character.authorImage : dummy.avatar,\n    alt: character.authorName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 25\n    }\n  })), __jsx(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 23\n    }\n  }, \"Author: \", character.authorName)))), auth.user && auth.user.uid === character.authorId ? __jsx(\"div\", {\n    className: \"edit-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 19\n    }\n  }, __jsx(WithLink, {\n    link: `/character/${character.id}/edit`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  }, __jsx(Space, {\n    size: 5,\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 23\n    }\n  }, __jsx(\"ion-icon\", {\n    name: \"create\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 25\n    }\n  }), __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 25\n    }\n  }, \"Edit\")))) : __jsx(\"div\", {\n    className: \"like-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 19\n    }\n  }, __jsx(Space, {\n    size: 5,\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 21\n    }\n  }, __jsx(\"ion-icon\", {\n    name: \"heart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 23\n    }\n  }), __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 23\n    }\n  }, \"Like\")))), __jsx(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 15\n    }\n  }, `${character.firstname} ${character.lastname && character.lastname}`), __jsx(\"div\", {\n    className: \"character-image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 15\n    }\n  }, __jsx(\"div\", {\n    className: \"img-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 17\n    }\n  }, __jsx(Image, {\n    src: character.image ? character.image : dummy.avatar,\n    width: \"100%\",\n    height: 600,\n    alt: \"character\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 19\n    }\n  }))), __jsx(\"div\", {\n    className: \"character-description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 15\n    }\n  }, __jsx(\"h3\", {\n    className: \"desc-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 17\n    }\n  }, \"Biography\"), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 17\n    }\n  }, character.description)), __jsx(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 15\n    }\n  }), __jsx(Descriptions, {\n    title: \"Character Info\",\n    layout: \"vertical\",\n    labelStyle: {\n      fontWeight: \"bolder\"\n    },\n    contentStyle: {\n      paddingBottom: 0\n    },\n    colon: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 15\n    }\n  }, __jsx(Descriptions.Item, {\n    label: \"Age\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 17\n    }\n  }, character.age ? character.age : \"N/A\"), __jsx(Descriptions.Item, {\n    label: \"Gender\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 17\n    }\n  }, character.gender), __jsx(Descriptions.Item, {\n    label: \"Ethnicity\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 17\n    }\n  }, character.ethnicity), __jsx(Descriptions.Item, {\n    label: \"Occupation\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 17\n    }\n  }, character.occupation), __jsx(Descriptions.Item, {\n    label: \"Group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 17\n    }\n  }, character.group), __jsx(Descriptions.Item, {\n    label: \"Residence\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 17\n    }\n  }, character.residence)), __jsx(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 15\n    }\n  }), __jsx(\"div\", {\n    className: \"character-relationships\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 15\n    }\n  }, __jsx(\"h3\", {\n    className: \"desc-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 17\n    }\n  }, \"Relationships\"), relatives.length > 0 ? __jsx(CharacterGrid, {\n    gutter: [16, 16],\n    type: \"show\",\n    md: 8,\n    lg: 6,\n    xxl: 6,\n    xl: 6,\n    sm: 12,\n    xs: 24,\n    characters: relatives,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 19\n    }\n  }) : __jsx(Empty, {\n    image: Empty.PRESENTED_IMAGE_SIMPLE,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 19\n    }\n  })), __jsx(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 15\n    }\n  }), __jsx(\"div\", {\n    className: \"character-stories\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 15\n    }\n  }, __jsx(\"h3\", {\n    className: \"desc-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 17\n    }\n  }, \"Stories\"))), __jsx(\"section\", {\n    className: \"character-feedback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 13\n    }\n  }, __jsx(\"h3\", {\n    className: \"side-heading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 15\n    }\n  }, \"Feedback\"))))));\n};\n\nconst mapStateToProps = state => ({\n  character: state.characters.character,\n  loading: state.characters.loading,\n  charaExists: state.characters.charaExists,\n  userCharacters: state.characters.userCharacters\n});\n\nexport default connect(mapStateToProps, {\n  getCharacter,\n  getUserCharacters\n})(Character);","map":{"version":3,"sources":["C:/Users/Utilisateur/Documents/CODE/kronikea-master/pages/character/[id]/index.js"],"names":["React","Link","useRouter","connect","Row","Col","Image","Divider","Space","Empty","Descriptions","dummy","getCharacter","getUserCharacters","Comments","CharacterCard","LoadingScreen","RedirectComp","useAuth","WithLink","CharacterGrid","Character","props","character","loading","charaExists","userCharacters","router","auth","relatives","setRelatives","useState","useEffect","query","id","authorId","public","user","uid","length","map","c","firstname","find","char","character_id","lastname","image","relation","filter","authorImage","avatar","authorName","description","fontWeight","paddingBottom","age","gender","ethnicity","occupation","group","residence","PRESENTED_IMAGE_SIMPLE","mapStateToProps","state","characters"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,GAAT,EAAcC,GAAd,EAAmBC,KAAnB,EAA0BC,OAA1B,EAAmCC,KAAnC,EAA0CC,KAA1C,EAAiDC,YAAjD,QAAqE,MAArE;AAEA,SAASC,KAAT,QAAsB,sBAAtB;AACA,SACEC,YADF,EAEEC,iBAFF,QAGO,0CAHP;AAKA,OAAOC,QAAP,MAAqB,sCAArB;AACA,OAAOC,aAAP,MAA0B,0CAA1B;AACA,OAAOC,aAAP,MAA0B,uCAA1B;AACA,OAAOC,YAAP,MAAyB,sCAAzB;AACA,SAASC,OAAT,QAAwB,0BAAxB;AACA,OAAOC,QAAP,MAAqB,kCAArB;AACA,SAASC,aAAT,QAA8B,iCAA9B;;AAEA,MAAMC,SAAS,GAAIC,KAAD,IAAW;AAC3B,QAAM;AAAEC,IAAAA,SAAF;AAAaC,IAAAA,OAAb;AAAsBC,IAAAA,WAAtB;AAAmCC,IAAAA;AAAnC,MAAsDJ,KAA5D;AACA,QAAMK,MAAM,GAAGzB,SAAS,EAAxB;AACA,QAAM0B,IAAI,GAAGV,OAAO,EAApB;AAEA,QAAM,CAACW,SAAD,EAAYC,YAAZ,IAA4B9B,KAAK,CAAC+B,QAAN,CAAe,EAAf,CAAlC;AAEA/B,EAAAA,KAAK,CAACgC,SAAN,CAAgB,MAAM;AACpBV,IAAAA,KAAK,CAACV,YAAN,CAAmBe,MAAM,CAACM,KAAP,CAAaC,EAAhC;AACD,GAFD,EAEG,CAACP,MAAM,CAACM,KAAP,CAAaC,EAAd,CAFH;AAIAlC,EAAAA,KAAK,CAACgC,SAAN,CAAgB,MAAM;AACpB,QACGT,SAAS,CAACY,QAAV,IAAsBZ,SAAS,CAACa,MAAjC,IACCR,IAAI,CAACS,IAAL,IAAad,SAAS,CAACY,QAAV,KAAuBP,IAAI,CAACS,IAAL,CAAUC,GAFjD,EAGE;AACAhB,MAAAA,KAAK,CAACT,iBAAN,CAAwBU,SAAS,CAACY,QAAlC;AACD;AACF,GAPD,EAOG,CAACZ,SAAD,EAAYK,IAAZ,CAPH;AASA5B,EAAAA,KAAK,CAACgC,SAAN,CAAgB,MAAM;AACpB,QAAIN,cAAc,CAACa,MAAf,GAAwB,CAAxB,IAA6BhB,SAAS,CAACM,SAAV,CAAoBU,MAApB,GAA6B,CAA9D,EAAiE;AAC/DT,MAAAA,YAAY,CACVP,SAAS,CAACM,SAAV,CACGW,GADH,CACQC,CAAD,KAAQ;AACXC,QAAAA,SAAS,EAAEhB,cAAc,CAACiB,IAAf,CAAqBC,IAAD,IAAUA,IAAI,CAACV,EAAL,KAAYO,CAAC,CAACI,YAA5C,EACRH,SAFQ;AAGXI,QAAAA,QAAQ,EAAEpB,cAAc,CAACiB,IAAf,CAAqBC,IAAD,IAAUA,IAAI,CAACV,EAAL,KAAYO,CAAC,CAACI,YAA5C,EACPC,QAJQ;AAKXC,QAAAA,KAAK,EAAErB,cAAc,CAACiB,IAAf,CAAqBC,IAAD,IAAUA,IAAI,CAACV,EAAL,KAAYO,CAAC,CAACI,YAA5C,EACJE,KANQ;AAOXb,QAAAA,EAAE,EAAER,cAAc,CAACiB,IAAf,CAAqBC,IAAD,IAAUA,IAAI,CAACV,EAAL,KAAYO,CAAC,CAACI,YAA5C,EAA0DX,EAPnD;AAQXc,QAAAA,QAAQ,EAAEP,CAAC,CAACO,QARD;AASXZ,QAAAA,MAAM,EAAEV,cAAc,CAACiB,IAAf,CAAqBC,IAAD,IAAUA,IAAI,CAACV,EAAL,KAAYO,CAAC,CAACI,YAA5C,EACLT;AAVQ,OAAR,CADP,EAaGa,MAbH,CAaWR,CAAD,IAAQb,IAAI,CAACS,IAAL,CAAUC,GAAV,KAAkBf,SAAS,CAACY,QAA5B,GAAuCM,CAAC,CAACL,MAAzC,GAAkDK,CAbpE,CADU,CAAZ;AAgBD;AACF,GAnBD,EAmBG,CAACf,cAAD,CAnBH;AAqBA,SACE,MAAC,aAAD;AAAe,IAAA,OAAO,EAAEF,OAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,YAAD;AAAc,IAAA,IAAI,EAAC,KAAnB;AAAyB,IAAA,SAAS,EAAEC,WAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,YAAD;AACE,IAAA,IAAI,EAAC,KADP;AAEE,IAAA,SAAS,EAAEF,SAAS,CAACa,MAAV,IAAoBb,SAAS,CAACY,QAAV,KAAuBP,IAAI,CAACS,IAAL,CAAUC,GAFlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAIE;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAS,IAAA,SAAS,EAAC,gBAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD;AAAM,IAAA,IAAI,EAAC,YAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD;AAAO,IAAA,KAAK,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AACE,IAAA,GAAG,EACDf,SAAS,CAAC2B,WAAV,GACI3B,SAAS,CAAC2B,WADd,GAEIvC,KAAK,CAACwC,MAJd;AAME,IAAA,GAAG,EAAE5B,SAAS,CAAC6B,UANjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,EAWE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAa7B,SAAS,CAAC6B,UAAvB,CAXF,CADF,CADF,CADF,EAkBGxB,IAAI,CAACS,IAAL,IAAaT,IAAI,CAACS,IAAL,CAAUC,GAAV,KAAkBf,SAAS,CAACY,QAAzC,GACC;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,QAAD;AAAU,IAAA,IAAI,EAAG,cAAaZ,SAAS,CAACW,EAAG,OAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD;AAAO,IAAA,IAAI,EAAE,CAAb;AAAgB,IAAA,KAAK,EAAC,QAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAU,IAAA,IAAI,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF,CADF,CADF,CADD,GAUC;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD;AAAO,IAAA,IAAI,EAAE,CAAb;AAAgB,IAAA,KAAK,EAAC,QAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAU,IAAA,IAAI,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF,CADF,CA5BJ,CADF,EAqCE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAM,GAAEX,SAAS,CAACmB,SAAU,IAC1BnB,SAAS,CAACuB,QAAV,IAAsBvB,SAAS,CAACuB,QACjC,EAFD,CArCF,EAwCE;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD;AACE,IAAA,GAAG,EAAEvB,SAAS,CAACwB,KAAV,GAAkBxB,SAAS,CAACwB,KAA5B,GAAoCpC,KAAK,CAACwC,MADjD;AAEE,IAAA,KAAK,EAAE,MAFT;AAGE,IAAA,MAAM,EAAE,GAHV;AAIE,IAAA,GAAG,EAAC,WAJN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,CAxCF,EAkDE;AAAK,IAAA,SAAS,EAAC,uBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAI,IAAA,SAAS,EAAC,YAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAI5B,SAAS,CAAC8B,WAAd,CAFF,CAlDF,EAsDE,MAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAtDF,EAuDE,MAAC,YAAD;AACE,IAAA,KAAK,EAAC,gBADR;AAEE,IAAA,MAAM,EAAC,UAFT;AAGE,IAAA,UAAU,EAAE;AAAEC,MAAAA,UAAU,EAAE;AAAd,KAHd;AAIE,IAAA,YAAY,EAAE;AAAEC,MAAAA,aAAa,EAAE;AAAjB,KAJhB;AAKE,IAAA,KAAK,EAAE,KALT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAOE,MAAC,YAAD,CAAc,IAAd;AAAmB,IAAA,KAAK,EAAC,KAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGhC,SAAS,CAACiC,GAAV,GAAgBjC,SAAS,CAACiC,GAA1B,GAAgC,KADnC,CAPF,EAUE,MAAC,YAAD,CAAc,IAAd;AAAmB,IAAA,KAAK,EAAC,QAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGjC,SAAS,CAACkC,MADb,CAVF,EAaE,MAAC,YAAD,CAAc,IAAd;AAAmB,IAAA,KAAK,EAAC,WAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGlC,SAAS,CAACmC,SADb,CAbF,EAgBE,MAAC,YAAD,CAAc,IAAd;AAAmB,IAAA,KAAK,EAAC,YAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGnC,SAAS,CAACoC,UADb,CAhBF,EAmBE,MAAC,YAAD,CAAc,IAAd;AAAmB,IAAA,KAAK,EAAC,OAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGpC,SAAS,CAACqC,KADb,CAnBF,EAsBE,MAAC,YAAD,CAAc,IAAd;AAAmB,IAAA,KAAK,EAAC,WAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGrC,SAAS,CAACsC,SADb,CAtBF,CAvDF,EAiFE,MAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAjFF,EAkFE;AAAK,IAAA,SAAS,EAAC,yBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAI,IAAA,SAAS,EAAC,YAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,EAEGhC,SAAS,CAACU,MAAV,GAAmB,CAAnB,GACC,MAAC,aAAD;AACE,IAAA,MAAM,EAAE,CAAC,EAAD,EAAK,EAAL,CADV;AAEE,IAAA,IAAI,EAAC,MAFP;AAGE,IAAA,EAAE,EAAE,CAHN;AAIE,IAAA,EAAE,EAAE,CAJN;AAKE,IAAA,GAAG,EAAE,CALP;AAME,IAAA,EAAE,EAAE,CANN;AAOE,IAAA,EAAE,EAAE,EAPN;AAQE,IAAA,EAAE,EAAE,EARN;AASE,IAAA,UAAU,EAAEV,SATd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,GAaC,MAAC,KAAD;AAAO,IAAA,KAAK,EAAEpB,KAAK,CAACqD,sBAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAfJ,CAlFF,EAoGE,MAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IApGF,EAqGE;AAAK,IAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAI,IAAA,SAAS,EAAC,YAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,CArGF,CADF,EA0GE;AAAS,IAAA,SAAS,EAAC,oBAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAI,IAAA,SAAS,EAAC,cAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,CA1GF,CAJF,CADF,CADF,CADF;AA0HD,CAnKD;;AAqKA,MAAMC,eAAe,GAAIC,KAAD,KAAY;AAClCzC,EAAAA,SAAS,EAAEyC,KAAK,CAACC,UAAN,CAAiB1C,SADM;AAElCC,EAAAA,OAAO,EAAEwC,KAAK,CAACC,UAAN,CAAiBzC,OAFQ;AAGlCC,EAAAA,WAAW,EAAEuC,KAAK,CAACC,UAAN,CAAiBxC,WAHI;AAIlCC,EAAAA,cAAc,EAAEsC,KAAK,CAACC,UAAN,CAAiBvC;AAJC,CAAZ,CAAxB;;AAOA,eAAevB,OAAO,CAAC4D,eAAD,EAAkB;AACtCnD,EAAAA,YADsC;AAEtCC,EAAAA;AAFsC,CAAlB,CAAP,CAGZQ,SAHY,CAAf","sourcesContent":["import React from \"react\";\r\nimport Link from \"next/link\";\r\nimport { useRouter } from \"next/router\";\r\nimport { connect } from \"react-redux\";\r\nimport { Row, Col, Image, Divider, Space, Empty, Descriptions } from \"antd\";\r\n\r\nimport { dummy } from \"../../../utils/dummy\";\r\nimport {\r\n  getCharacter,\r\n  getUserCharacters,\r\n} from \"../../../redux/actions/charactersActions\";\r\n\r\nimport Comments from \"../../../components/chapter/Comments\";\r\nimport CharacterCard from \"../../../components/common/CharacterCard\";\r\nimport LoadingScreen from \"../../../components/hoc/LoadingScreen\";\r\nimport RedirectComp from \"../../../components/hoc/RedirectComp\";\r\nimport { useAuth } from \"../../../hooks/userHooks\";\r\nimport WithLink from \"../../../components/hoc/withLink\";\r\nimport { CharacterGrid } from \"../../../components/common/Grid\";\r\n\r\nconst Character = (props) => {\r\n  const { character, loading, charaExists, userCharacters } = props;\r\n  const router = useRouter();\r\n  const auth = useAuth();\r\n\r\n  const [relatives, setRelatives] = React.useState([]);\r\n\r\n  React.useEffect(() => {\r\n    props.getCharacter(router.query.id);\r\n  }, [router.query.id]);\r\n\r\n  React.useEffect(() => {\r\n    if (\r\n      (character.authorId && character.public) ||\r\n      (auth.user && character.authorId === auth.user.uid)\r\n    ) {\r\n      props.getUserCharacters(character.authorId);\r\n    }\r\n  }, [character, auth]);\r\n\r\n  React.useEffect(() => {\r\n    if (userCharacters.length > 0 && character.relatives.length > 0) {\r\n      setRelatives(\r\n        character.relatives\r\n          .map((c) => ({\r\n            firstname: userCharacters.find((char) => char.id === c.character_id)\r\n              .firstname,\r\n            lastname: userCharacters.find((char) => char.id === c.character_id)\r\n              .lastname,\r\n            image: userCharacters.find((char) => char.id === c.character_id)\r\n              .image,\r\n            id: userCharacters.find((char) => char.id === c.character_id).id,\r\n            relation: c.relation,\r\n            public: userCharacters.find((char) => char.id === c.character_id)\r\n              .public,\r\n          }))\r\n          .filter((c) => (auth.user.uid !== character.authorId ? c.public : c))\r\n      );\r\n    }\r\n  }, [userCharacters]);\r\n\r\n  return (\r\n    <LoadingScreen loading={loading}>\r\n      <RedirectComp type=\"404\" condition={charaExists}>\r\n        <RedirectComp\r\n          type=\"403\"\r\n          condition={character.public || character.authorId === auth.user.uid}\r\n        >\r\n          <div className=\"main-character\">\r\n            <section className=\"character-page\">\r\n              <div className=\"character-meta\">\r\n                <Link href=\"/profile/1\">\r\n                  <a>\r\n                    <Space align=\"center\">\r\n                      <div className=\"avatar\">\r\n                        <img\r\n                          src={\r\n                            character.authorImage\r\n                              ? character.authorImage\r\n                              : dummy.avatar\r\n                          }\r\n                          alt={character.authorName}\r\n                        />\r\n                      </div>\r\n                      <h5>Author: {character.authorName}</h5>\r\n                    </Space>\r\n                  </a>\r\n                </Link>\r\n                {auth.user && auth.user.uid === character.authorId ? (\r\n                  <div className=\"edit-btn\">\r\n                    <WithLink link={`/character/${character.id}/edit`}>\r\n                      <Space size={5} align=\"center\">\r\n                        <ion-icon name=\"create\"></ion-icon>\r\n                        <span>Edit</span>\r\n                      </Space>\r\n                    </WithLink>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"like-btn\">\r\n                    <Space size={5} align=\"center\">\r\n                      <ion-icon name=\"heart\"></ion-icon>\r\n                      <span>Like</span>\r\n                    </Space>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <h2>{`${character.firstname} ${\r\n                character.lastname && character.lastname\r\n              }`}</h2>\r\n              <div className=\"character-image\">\r\n                <div className=\"img-container\">\r\n                  <Image\r\n                    src={character.image ? character.image : dummy.avatar}\r\n                    width={\"100%\"}\r\n                    height={600}\r\n                    alt=\"character\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"character-description\">\r\n                <h3 className=\"desc-title\">Biography</h3>\r\n                <p>{character.description}</p>\r\n              </div>\r\n              <Divider />\r\n              <Descriptions\r\n                title=\"Character Info\"\r\n                layout=\"vertical\"\r\n                labelStyle={{ fontWeight: \"bolder\" }}\r\n                contentStyle={{ paddingBottom: 0 }}\r\n                colon={false}\r\n              >\r\n                <Descriptions.Item label=\"Age\">\r\n                  {character.age ? character.age : \"N/A\"}\r\n                </Descriptions.Item>\r\n                <Descriptions.Item label=\"Gender\">\r\n                  {character.gender}\r\n                </Descriptions.Item>\r\n                <Descriptions.Item label=\"Ethnicity\">\r\n                  {character.ethnicity}\r\n                </Descriptions.Item>\r\n                <Descriptions.Item label=\"Occupation\">\r\n                  {character.occupation}\r\n                </Descriptions.Item>\r\n                <Descriptions.Item label=\"Group\">\r\n                  {character.group}\r\n                </Descriptions.Item>\r\n                <Descriptions.Item label=\"Residence\">\r\n                  {character.residence}\r\n                </Descriptions.Item>\r\n              </Descriptions>\r\n              <Divider />\r\n              <div className=\"character-relationships\">\r\n                <h3 className=\"desc-title\">Relationships</h3>\r\n                {relatives.length > 0 ? (\r\n                  <CharacterGrid\r\n                    gutter={[16, 16]}\r\n                    type=\"show\"\r\n                    md={8}\r\n                    lg={6}\r\n                    xxl={6}\r\n                    xl={6}\r\n                    sm={12}\r\n                    xs={24}\r\n                    characters={relatives}\r\n                  />\r\n                ) : (\r\n                  <Empty image={Empty.PRESENTED_IMAGE_SIMPLE} />\r\n                )}\r\n              </div>\r\n              <Divider />\r\n              <div className=\"character-stories\">\r\n                <h3 className=\"desc-title\">Stories</h3>\r\n              </div>\r\n            </section>\r\n            <section className=\"character-feedback\">\r\n              <h3 className=\"side-heading\">Feedback</h3>\r\n              {/* <Comments /> */}\r\n            </section>\r\n          </div>\r\n        </RedirectComp>\r\n      </RedirectComp>\r\n    </LoadingScreen>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  character: state.characters.character,\r\n  loading: state.characters.loading,\r\n  charaExists: state.characters.charaExists,\r\n  userCharacters: state.characters.userCharacters,\r\n});\r\n\r\nexport default connect(mapStateToProps, {\r\n  getCharacter,\r\n  getUserCharacters,\r\n})(Character);\r\n"]},"metadata":{},"sourceType":"module"}