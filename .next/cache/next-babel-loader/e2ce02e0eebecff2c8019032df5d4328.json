{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Utilisateur\\\\Documents\\\\CODE\\\\kronikea-master\\\\pages\\\\story\\\\[id]\\\\index.js\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { Row, Col, Image, Tag, Skeleton, Space, message } from \"antd\";\nimport { connect } from \"react-redux\";\nimport moment from \"moment\";\nimport { LANGUAGES } from \"../../../utils/constants\";\nimport { getStory, getChapters, getStoryCharacters, deleteChapter } from \"../../../redux/actions/storiesActions\";\nimport CharacterCard from \"../../../components/common/CharacterCard\";\nimport LocationCard from \"../../../components/common/LocationCard\";\nimport WithLink from \"../../../components/hoc/WithLink\";\nimport Chapters from \"../../../components/story/Chapters\";\n\nconst Story = ({\n  getStory,\n  story,\n  loading,\n  getChapters,\n  chapters,\n  getStoryCharacters,\n  deleteChapter,\n  actionMessage\n}) => {\n  var _story$mainCharacters, _story$secondaryChara;\n\n  const router = useRouter();\n  React.useEffect(() => {\n    getStory(router.query.id);\n    getChapters(router.query.id);\n    getStoryCharacters(router.query.id);\n  }, []);\n  React.useEffect(() => {\n    if (actionMessage) {\n      message.success(actionMessage);\n      getChapters(router.query.id);\n    }\n  }, [actionMessage]);\n\n  const deleteChapterFunc = id => {\n    deleteChapter(id, router.query.id);\n  };\n\n  return __jsx(\"div\", {\n    className: \"story\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 5\n    }\n  }, __jsx(Row, {\n    gutter: 24,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }\n  }, __jsx(Col, {\n    sm: 24,\n    md: 8,\n    lg: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"story-details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 11\n    }\n  }, !loading && __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"poster\",\n    \"data-aos\": \"zoom-in\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }\n  }, __jsx(Image, {\n    src: story.banner,\n    alt: `poster ${story.title}`,\n    width: \"100%\",\n    height: \"100%\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 19\n    }\n  })), __jsx(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 17\n    }\n  }, story.title), __jsx(\"p\", {\n    className: \"author\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 17\n    }\n  }, \"by\", \" \", __jsx(Link, {\n    href: \"/profile/1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 19\n    }\n  }, __jsx(\"a\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 21\n    }\n  }, story.authorName))), __jsx(\"div\", {\n    className: `btn-follow icon custom-icon`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  }, __jsx(\"ion-icon\", {\n    name: \"heart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 19\n    }\n  })), __jsx(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 17\n    }\n  }, \"Summary\"), __jsx(\"p\", {\n    className: \"summary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }\n  }, story.summary ? story.summary : \"No summary yet\"), __jsx(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }\n  }, \"Details\"), __jsx(\"div\", {\n    className: \"details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 17\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 19\n    }\n  }, \"Posted at:\", \" \", typeof story.createdAt === \"object\" ? moment.unix(story.createdAt.seconds).format(\"YYYY-DD-MM\") : moment(story.createdAt).format(\"YYYY-DD-MM\")), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 19\n    }\n  }), __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 19\n    }\n  }, \"Category:\", \" \", __jsx(Link, {\n    href: \"/category/1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 21\n    }\n  }, __jsx(\"a\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 23\n    }\n  }, \"Drama\"))), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 19\n    }\n  }), __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 19\n    }\n  }, \"Language:\", \" \", LANGUAGES.find(l => l.value === story.language).name), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 19\n    }\n  }), __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 19\n    }\n  }, \"Status: \", story.status), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 19\n    }\n  }), __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 19\n    }\n  }, \"Copyright: \", story.copyright), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 19\n    }\n  }), __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 19\n    }\n  }, \"Cover Copyright: \", story.imageCopyright), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 19\n    }\n  }), __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 19\n    }\n  }, \"Mature content: \", story.mature ? \"YES\" : \"NO\"), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 19\n    }\n  })), __jsx(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 17\n    }\n  }, \"Tags\"), __jsx(\"div\", {\n    className: \"tags\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }\n  }, story.tags.map(tag => __jsx(Tag, {\n    key: tag,\n    color: \"#6d5dfc\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 21\n    }\n  }, `#${tag}`)))), __jsx(React.Fragment, null, loading && __jsx(Skeleton.Avatar, {\n    loading: loading,\n    shape: \"square\",\n    size: 265,\n    active: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 17\n    }\n  }), __jsx(Skeleton, {\n    loading: loading,\n    paragraph: true,\n    active: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 15\n    }\n  }), __jsx(Skeleton, {\n    loading: loading,\n    paragraph: true,\n    active: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 15\n    }\n  })))), __jsx(Col, {\n    sm: 24,\n    md: 16,\n    lg: 18,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"story-chapters\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 11\n    }\n  }, __jsx(Chapters, {\n    chapters: chapters,\n    id: router.query.id,\n    deleteChapter: deleteChapterFunc,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }\n  }), __jsx(\"h3\", {\n    className: \"heading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }\n  }, \"Main Characters\"), __jsx(Row, {\n    gutter: [24, 16],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }\n  }, (_story$mainCharacters = story.mainCharacters) === null || _story$mainCharacters === void 0 ? void 0 : _story$mainCharacters.map(c => __jsx(Col, {\n    key: c.id,\n    xs: 12,\n    sm: 8,\n    md: 6,\n    lg: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 17\n    }\n  }, __jsx(WithLink, {\n    link: `/character/${c.id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 19\n    }\n  }, __jsx(CharacterCard, {\n    character: c,\n    type: \"story\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 21\n    }\n  }))))), __jsx(\"h3\", {\n    className: \"heading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }\n  }, \"Secondary Characters\"), __jsx(Row, {\n    gutter: [24, 16],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }\n  }, (_story$secondaryChara = story.secondaryCharacters) === null || _story$secondaryChara === void 0 ? void 0 : _story$secondaryChara.map(c => __jsx(Col, {\n    key: c.id,\n    xs: 12,\n    sm: 8,\n    md: 6,\n    lg: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 17\n    }\n  }, __jsx(WithLink, {\n    link: `/character/${c.id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 19\n    }\n  }, __jsx(CharacterCard, {\n    character: c,\n    type: \"story\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 21\n    }\n  }))))), __jsx(\"h3\", {\n    className: \"heading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 13\n    }\n  }, \"Locations\"), __jsx(Row, {\n    gutter: [24, 16],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }\n  }, __jsx(Col, {\n    xs: 12,\n    sm: 8,\n    md: 6,\n    lg: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 15\n    }\n  }, __jsx(LocationCard, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 17\n    }\n  })), __jsx(Col, {\n    xs: 12,\n    sm: 8,\n    md: 6,\n    lg: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 15\n    }\n  }, __jsx(LocationCard, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 17\n    }\n  })), __jsx(Col, {\n    xs: 12,\n    sm: 8,\n    md: 6,\n    lg: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 15\n    }\n  }, __jsx(LocationCard, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 17\n    }\n  })), __jsx(Col, {\n    xs: 12,\n    sm: 8,\n    md: 6,\n    lg: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 15\n    }\n  }, __jsx(LocationCard, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 17\n    }\n  })), __jsx(Col, {\n    xs: 12,\n    sm: 8,\n    md: 6,\n    lg: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 15\n    }\n  }, __jsx(LocationCard, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 17\n    }\n  })), __jsx(Col, {\n    xs: 12,\n    sm: 8,\n    md: 6,\n    lg: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 15\n    }\n  }, __jsx(LocationCard, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 17\n    }\n  })))))));\n};\n\nconst mapStateToProps = state => ({\n  story: state.stories.story,\n  loading: state.stories.loading,\n  chapters: state.stories.chapters,\n  actionMessage: state.stories.message,\n  loadingChapter: state.stories.loadingChapter\n});\n\nexport default connect(mapStateToProps, {\n  getStory,\n  getChapters,\n  getStoryCharacters,\n  deleteChapter\n})(Story);","map":{"version":3,"sources":["C:/Users/Utilisateur/Documents/CODE/kronikea-master/pages/story/[id]/index.js"],"names":["React","Link","useRouter","Row","Col","Image","Tag","Skeleton","Space","message","connect","moment","LANGUAGES","getStory","getChapters","getStoryCharacters","deleteChapter","CharacterCard","LocationCard","WithLink","Chapters","Story","story","loading","chapters","actionMessage","router","useEffect","query","id","success","deleteChapterFunc","banner","title","authorName","summary","createdAt","unix","seconds","format","find","l","value","language","name","status","copyright","imageCopyright","mature","tags","map","tag","mainCharacters","c","secondaryCharacters","mapStateToProps","state","stories","loadingChapter"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Link from \"next/link\";\r\nimport { useRouter } from \"next/router\";\r\nimport { Row, Col, Image, Tag, Skeleton, Space, message } from \"antd\";\r\nimport { connect } from \"react-redux\";\r\nimport moment from \"moment\";\r\n\r\nimport { LANGUAGES } from \"../../../utils/constants\";\r\nimport {\r\n  getStory,\r\n  getChapters,\r\n  getStoryCharacters,\r\n  deleteChapter,\r\n} from \"../../../redux/actions/storiesActions\";\r\n\r\nimport CharacterCard from \"../../../components/common/CharacterCard\";\r\nimport LocationCard from \"../../../components/common/LocationCard\";\r\nimport WithLink from \"../../../components/hoc/WithLink\";\r\nimport Chapters from \"../../../components/story/Chapters\";\r\n\r\nconst Story = ({\r\n  getStory,\r\n  story,\r\n  loading,\r\n  getChapters,\r\n  chapters,\r\n  getStoryCharacters,\r\n  deleteChapter,\r\n  actionMessage,\r\n}) => {\r\n  const router = useRouter();\r\n\r\n  React.useEffect(() => {\r\n    getStory(router.query.id);\r\n    getChapters(router.query.id);\r\n    getStoryCharacters(router.query.id);\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    if (actionMessage) {\r\n      message.success(actionMessage);\r\n      getChapters(router.query.id);\r\n    }\r\n  }, [actionMessage]);\r\n\r\n  const deleteChapterFunc = (id) => {\r\n    deleteChapter(id, router.query.id);\r\n  };\r\n\r\n  return (\r\n    <div className=\"story\">\r\n      <Row gutter={24}>\r\n        <Col sm={24} md={8} lg={6}>\r\n          <div className=\"story-details\">\r\n            {!loading && (\r\n              <>\r\n                <div className=\"poster\" data-aos=\"zoom-in\">\r\n                  <Image\r\n                    src={story.banner}\r\n                    alt={`poster ${story.title}`}\r\n                    width={\"100%\"}\r\n                    height={\"100%\"}\r\n                  />\r\n                </div>\r\n                <h2>{story.title}</h2>\r\n                <p className=\"author\">\r\n                  by{\" \"}\r\n                  <Link href=\"/profile/1\">\r\n                    <a>{story.authorName}</a>\r\n                  </Link>\r\n                </p>\r\n                <div className={`btn-follow icon custom-icon`}>\r\n                  <ion-icon name=\"heart\"></ion-icon>\r\n                </div>\r\n                <h3>Summary</h3>\r\n                <p className=\"summary\">\r\n                  {story.summary ? story.summary : \"No summary yet\"}\r\n                </p>\r\n                <h3>Details</h3>\r\n                <div className=\"details\">\r\n                  <span>\r\n                    Posted at:{\" \"}\r\n                    {typeof story.createdAt === \"object\"\r\n                      ? moment\r\n                          .unix(story.createdAt.seconds)\r\n                          .format(\"YYYY-DD-MM\")\r\n                      : moment(story.createdAt).format(\"YYYY-DD-MM\")}\r\n                  </span>\r\n                  <br />\r\n                  <span>\r\n                    Category:{\" \"}\r\n                    <Link href=\"/category/1\">\r\n                      <a>Drama</a>\r\n                    </Link>\r\n                  </span>\r\n                  <br />\r\n                  <span>\r\n                    Language:{\" \"}\r\n                    {LANGUAGES.find((l) => l.value === story.language).name}\r\n                  </span>\r\n                  <br />\r\n                  <span>Status: {story.status}</span>\r\n                  <br />\r\n                  <span>Copyright: {story.copyright}</span>\r\n                  <br />\r\n                  <span>Cover Copyright: {story.imageCopyright}</span>\r\n                  <br />\r\n                  <span>Mature content: {story.mature ? \"YES\" : \"NO\"}</span>\r\n                  <br />\r\n                </div>\r\n                <h3>Tags</h3>\r\n                <div className=\"tags\">\r\n                  {story.tags.map((tag) => (\r\n                    <Tag key={tag} color=\"#6d5dfc\">{`#${tag}`}</Tag>\r\n                  ))}\r\n                </div>\r\n              </>\r\n            )}\r\n            <>\r\n              {loading && (\r\n                <Skeleton.Avatar\r\n                  loading={loading}\r\n                  shape=\"square\"\r\n                  size={265}\r\n                  active\r\n                />\r\n              )}\r\n              <Skeleton loading={loading} paragraph active />\r\n              <Skeleton loading={loading} paragraph active />\r\n            </>\r\n          </div>\r\n        </Col>\r\n        <Col sm={24} md={16} lg={18}>\r\n          <div className=\"story-chapters\">\r\n            <Chapters\r\n              chapters={chapters}\r\n              id={router.query.id}\r\n              deleteChapter={deleteChapterFunc}\r\n            />\r\n            <h3 className=\"heading\">Main Characters</h3>\r\n            <Row gutter={[24, 16]}>\r\n              {story.mainCharacters?.map((c) => (\r\n                <Col key={c.id} xs={12} sm={8} md={6} lg={4}>\r\n                  <WithLink link={`/character/${c.id}`}>\r\n                    <CharacterCard character={c} type=\"story\" />\r\n                  </WithLink>\r\n                </Col>\r\n              ))}\r\n            </Row>\r\n            <h3 className=\"heading\">Secondary Characters</h3>\r\n            <Row gutter={[24, 16]}>\r\n              {story.secondaryCharacters?.map((c) => (\r\n                <Col key={c.id} xs={12} sm={8} md={6} lg={4}>\r\n                  <WithLink link={`/character/${c.id}`}>\r\n                    <CharacterCard character={c} type=\"story\" />\r\n                  </WithLink>\r\n                </Col>\r\n              ))}\r\n            </Row>\r\n            <h3 className=\"heading\">Locations</h3>\r\n            <Row gutter={[24, 16]}>\r\n              <Col xs={12} sm={8} md={6} lg={4}>\r\n                <LocationCard />\r\n              </Col>\r\n              <Col xs={12} sm={8} md={6} lg={4}>\r\n                <LocationCard />\r\n              </Col>\r\n              <Col xs={12} sm={8} md={6} lg={4}>\r\n                <LocationCard />\r\n              </Col>\r\n              <Col xs={12} sm={8} md={6} lg={4}>\r\n                <LocationCard />\r\n              </Col>\r\n              <Col xs={12} sm={8} md={6} lg={4}>\r\n                <LocationCard />\r\n              </Col>\r\n              <Col xs={12} sm={8} md={6} lg={4}>\r\n                <LocationCard />\r\n              </Col>\r\n            </Row>\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  story: state.stories.story,\r\n  loading: state.stories.loading,\r\n  chapters: state.stories.chapters,\r\n  actionMessage: state.stories.message,\r\n  loadingChapter: state.stories.loadingChapter,\r\n});\r\n\r\nexport default connect(mapStateToProps, {\r\n  getStory,\r\n  getChapters,\r\n  getStoryCharacters,\r\n  deleteChapter,\r\n})(Story);\r\n"]},"metadata":{},"sourceType":"module"}