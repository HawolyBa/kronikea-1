{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { types } from \"../../utils/constants\";\nimport { message } from \"antd\";\nimport { db, auth, storage } from \"../fbConfig\";\nimport firebase from \"firebase/app\";\nexport var getCharacter = function getCharacter(id, type) {\n  return function (dispatch) {\n    var relArr = [];\n    var storyArr = [];\n    db.collection(\"characters\").doc(id).get().then(function (doc) {\n      if (doc.exists) {\n        if (type === \"show\") {\n          var relatives = doc.data().relativesArr;\n          var relQueries = [];\n          relatives.forEach(function (rel) {\n            relQueries.push(db.collection(\"characters\").doc(rel).get());\n          });\n          Promise.all(relQueries).then(function (res) {\n            res.forEach(function (_char) {\n              return relArr.push(_objectSpread(_objectSpread({}, _char.data()), {}, {\n                id: _char.id,\n                relation: doc.data().relatives.find(function (c) {\n                  return c.character_id === _char.id;\n                }).relation\n              }));\n            });\n            db.collection(\"stories\").where(\"seondaryArr\", \"array-contains\", id).get().then(function (docs) {\n              docs.forEach(function (story) {\n                storyArr.push({\n                  id: story.id,\n                  title: story.data().title\n                });\n              });\n              dispatch({\n                type: types.GET_CHARACTER,\n                payload: {\n                  character: _objectSpread(_objectSpread({}, doc.data()), {}, {\n                    id: doc.id,\n                    relatives: relArr,\n                    stories: storyArr\n                  }),\n                  charaExists: true,\n                  loading: false\n                }\n              });\n            });\n          });\n        } else {\n          dispatch({\n            type: types.GET_CHARACTER,\n            payload: {\n              character: _objectSpread(_objectSpread({}, doc.data()), {}, {\n                id: doc.id\n              }),\n              charaExists: true,\n              loading: false\n            }\n          });\n        }\n      } else {\n        dispatch({\n          type: types.GET_CHARACTER,\n          payload: {\n            charaExists: false,\n            loading: false\n          }\n        });\n      }\n    });\n  };\n};\nexport var addCharacter = function addCharacter(data) {\n  return function (dispatch) {\n    dispatch({\n      type: types.ADD_CHARACTER,\n      payload: {\n        loading: true\n      }\n    });\n    var charaId = \"\";\n    db.collection(\"characters\").add(_objectSpread(_objectSpread({}, data), {}, {\n      image: typeof data.image === \"string\" ? data.image : \"\",\n      createdAt: firebase.firestore.FieldValue.serverTimestamp(),\n      likesCount: 0,\n      likes: [],\n      dislikes: []\n    })).then(function (res) {\n      charaId = res.id;\n      var imageName = \"\".concat(res.id, \"_\").concat(data.firstname.toLowerCase()).concat(data.lastname && \"_\").concat(data.lastname && data.lastname.toLowerCase());\n\n      if (typeof data.image === \"object\") {\n        storage.ref(\"\".concat(auth.currentUser.uid, \"/\").concat(imageName)).put(data.image).then(function () {\n          return storage.ref(auth.currentUser.uid).child(imageName).getDownloadURL();\n        }).then(function (url) {\n          return db.collection(\"characters\").doc(charaId).update({\n            image: url\n          });\n        }).then(function () {\n          message.success(\"Character added successfully\");\n          dispatch({\n            type: types.ADD_CHARACTER,\n            payload: {\n              message: \"Character added successfully\",\n              characterId: charaId,\n              loading: false\n            }\n          });\n        });\n      } else {\n        message.success(\"Character added successfully\");\n        dispatch({\n          type: types.ADD_CHARACTER,\n          payload: {\n            message: \"Character added successfully\",\n            characterId: charaId,\n            loading: false\n          }\n        });\n      }\n    })[\"catch\"](function (err) {\n      message.error(err.message);\n    });\n  };\n};\nexport var editCharacter = function editCharacter(data, id) {\n  return function (dispatch) {\n    dispatch({\n      type: types.EDIT_CHARACTER,\n      payload: {\n        loadingCharacter: true\n      }\n    });\n    var imageName = \"\".concat(id, \"_\").concat(data.firstname.toLowerCase()).concat(data.lastname && \"_\").concat(data.lastname && data.lastname.toLowerCase());\n\n    if (data.image && typeof data.image === \"object\") {\n      storage.ref(\"\".concat(auth.currentUser.uid, \"/\").concat(imageName)).put(data.image).then(function () {\n        return storage.ref(auth.currentUser.uid).child(imageName).getDownloadURL();\n      }).then(function (url) {\n        return db.collection(\"characters\").doc(id).update(_objectSpread(_objectSpread({}, data), {}, {\n          image: url,\n          relativesArr: data.relatives.map(function (c) {\n            return c.character_id;\n          })\n        }));\n      }).then(function () {\n        dispatch({\n          type: types.EDIT_CHARACTER,\n          payload: {\n            message: \"Character edited successfully\",\n            loadingCharacter: false\n          }\n        });\n      })[\"catch\"](function (err) {\n        message.error(err.message);\n      });\n    } else {\n      db.collection(\"characters\").doc(id).update(_objectSpread(_objectSpread({}, data), {}, {\n        relativesArr: data.relatives.map(function (c) {\n          return c.character_id;\n        })\n      })).then(function () {\n        dispatch({\n          type: types.EDIT_CHARACTER,\n          payload: {\n            message: \"Character edited successfully\",\n            loadingCharacter: false\n          }\n        });\n      })[\"catch\"](function (err) {\n        message.error(err.message);\n      });\n    }\n  };\n};\nexport var deleteCharacter = function deleteCharacter(id, firstname, lastname) {\n  return function (dispatch) {\n    dispatch({\n      type: types.DELETE_CHARACTER,\n      payload: {\n        loading: true\n      }\n    });\n    var imageName = \"\".concat(id, \"_\").concat(firstname.toLowerCase()).concat(lastname && \"_\").concat(lastname && lastname.toLowerCase());\n    var batch = db.batch();\n    db.collection(\"characters\").doc(id)[\"delete\"]().then(function () {\n      if (storage.ref(\"\".concat(auth.currentUser.uid, \"/\").concat(imageName))) {\n        return storage.ref(\"\".concat(auth.currentUser.uid, \"/\").concat(imageName))[\"delete\"]();\n      }\n    }).then(function () {\n      db.collection(\"chapters\").where(\"characters\", \"array-contains\", id).get().then(function (docs) {\n        docs.forEach(function (doc) {\n          batch.update(db.collection(\"chapters\").doc(doc.id), {\n            characters: doc.data().characters.filter(function (c) {\n              return c !== id;\n            })\n          });\n        });\n      }).then(function () {\n        db.collection(\"stories\").where(\"secondaryArr\", \"array-contains\", id).get().then(function (stories) {\n          stories.forEach(function (story) {\n            batch.update(db.collection(\"stories\").doc(story.id), {\n              mainCharacters: story.data().mainCharacters.filter(function (c) {\n                return c !== id;\n              }),\n              secondaryArr: story.data().secondaryArr.filter(function (c) {\n                return c !== id;\n              }),\n              secondaryCharacters: story.data().secondaryCharacters.filter(function (c) {\n                return c.id !== id;\n              })\n            });\n          });\n        }).then(function () {\n          db.collection(\"characters\").where(\"relativesArr\", \"array-contains\", id).get().then(function (characters) {\n            characters.forEach(function (_char2) {\n              batch.update(db.collection(\"characters\").doc(_char2.id), {\n                relativesArr: _char2.data().relativesArr.filter(function (c) {\n                  return c !== id;\n                }),\n                relatives: _char2.data().relatives.filter(function (c) {\n                  return c.character_id !== id;\n                })\n              });\n            });\n          }).then(function () {\n            db.collection(\"charactersLikes\").where(\"characterId\", \"==\", id).get().then(function (likes) {\n              likes.forEach(function (like) {\n                batch[\"delete\"](db.collection(\"charactersLikes\").doc(like.id));\n              });\n              batch.commit().then(function () {\n                dispatch({\n                  type: types.DELETE_CHARACTER,\n                  payload: {\n                    message: \"Character deleted successfully\",\n                    loading: false,\n                    deleted: true,\n                    charaExists: false\n                  }\n                });\n              });\n            });\n          });\n        });\n      });\n    });\n  };\n};\nexport var getUserCharacters = function getUserCharacters(userId) {\n  return function (dispatch) {\n    db.collection(\"characters\").where(\"authorId\", \"==\", userId).get().then(function (docs) {\n      var items = [];\n      docs.forEach(function (doc) {\n        items = [].concat(_toConsumableArray(items), [_objectSpread({\n          id: doc.id\n        }, doc.data())]);\n      });\n      return items;\n    }).then(function (items) {\n      dispatch({\n        type: types.GET_USER_CHARACTERS,\n        payload: items\n      });\n    });\n  };\n};\nexport var getFavoriteCharacters = function getFavoriteCharacters() {\n  return function (dispatch) {\n    db.collection(\"charactersLikes\").where(\"senderId\", \"==\", auth.currentUser.uid).get().then(function (docs) {\n      var favArr = [];\n      docs.forEach(function (doc) {\n        favArr = [].concat(_toConsumableArray(favArr), [doc.data().characterId]);\n      });\n      return favArr;\n    }).then(function (users) {\n      var result = users.map(function (user) {\n        return db.collection(\"characters\").doc(user).get();\n      });\n      Promise.all(result).then(function (res) {\n        var favUsers = [];\n        res.forEach(function (doc) {\n          return favUsers = [].concat(_toConsumableArray(favUsers), [_objectSpread({\n            id: doc.id\n          }, doc.data())]);\n        });\n        dispatch({\n          type: types.GET_FAVORITE_CHARACTERS,\n          payload: favUsers\n        });\n      });\n    });\n  };\n};\nexport var getCharactersInStory = function getCharactersInStory(id) {\n  return function (dispatch) {\n    db.collection(\"stories\").doc(id).onSnapshot(function (doc) {\n      dispatch({\n        type: types.GET_STORY_CHARACTERS,\n        payload: {\n          secondaryCharacters: doc.data().secondaryCharacters,\n          mainArr: doc.data().mainCharacters\n        }\n      });\n    });\n  };\n};","map":{"version":3,"sources":["C:/Users/Utilisateur/Documents/CODE/kronikea-master/redux/actions/charactersActions.js"],"names":["types","message","db","auth","storage","firebase","getCharacter","id","type","dispatch","relArr","storyArr","collection","doc","get","then","exists","relatives","data","relativesArr","relQueries","forEach","rel","push","Promise","all","res","char","relation","find","c","character_id","where","docs","story","title","GET_CHARACTER","payload","character","stories","charaExists","loading","addCharacter","ADD_CHARACTER","charaId","add","image","createdAt","firestore","FieldValue","serverTimestamp","likesCount","likes","dislikes","imageName","firstname","toLowerCase","lastname","ref","currentUser","uid","put","child","getDownloadURL","url","update","success","characterId","err","error","editCharacter","EDIT_CHARACTER","loadingCharacter","map","deleteCharacter","DELETE_CHARACTER","batch","characters","filter","mainCharacters","secondaryArr","secondaryCharacters","like","commit","deleted","getUserCharacters","userId","items","GET_USER_CHARACTERS","getFavoriteCharacters","favArr","users","result","user","favUsers","GET_FAVORITE_CHARACTERS","getCharactersInStory","onSnapshot","GET_STORY_CHARACTERS","mainArr"],"mappings":"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","sourcesContent":["import { types } from \"../../utils/constants\";\r\nimport { message } from \"antd\";\r\nimport { db, auth, storage } from \"../fbConfig\";\r\nimport firebase from \"firebase/app\";\r\n\r\nexport const getCharacter = (id, type) => (dispatch) => {\r\n  let relArr = [];\r\n  let storyArr = [];\r\n  db.collection(\"characters\")\r\n    .doc(id)\r\n    .get()\r\n    .then((doc) => {\r\n      if (doc.exists) {\r\n        if (type === \"show\") {\r\n          const relatives = doc.data().relativesArr;\r\n          let relQueries = [];\r\n          relatives.forEach((rel) => {\r\n            relQueries.push(db.collection(\"characters\").doc(rel).get());\r\n          });\r\n          Promise.all(relQueries).then((res) => {\r\n            res.forEach((char) =>\r\n              relArr.push({\r\n                ...char.data(),\r\n                id: char.id,\r\n                relation: doc\r\n                  .data()\r\n                  .relatives.find((c) => c.character_id === char.id).relation,\r\n              })\r\n            );\r\n\r\n            db.collection(\"stories\")\r\n              .where(\"seondaryArr\", \"array-contains\", id)\r\n              .get()\r\n              .then((docs) => {\r\n                docs.forEach((story) => {\r\n                  storyArr.push({ id: story.id, title: story.data().title });\r\n                });\r\n                dispatch({\r\n                  type: types.GET_CHARACTER,\r\n                  payload: {\r\n                    character: {\r\n                      ...doc.data(),\r\n                      id: doc.id,\r\n                      relatives: relArr,\r\n                      stories: storyArr,\r\n                    },\r\n                    charaExists: true,\r\n                    loading: false,\r\n                  },\r\n                });\r\n              });\r\n          });\r\n        } else {\r\n          dispatch({\r\n            type: types.GET_CHARACTER,\r\n            payload: {\r\n              character: { ...doc.data(), id: doc.id },\r\n              charaExists: true,\r\n              loading: false,\r\n            },\r\n          });\r\n        }\r\n      } else {\r\n        dispatch({\r\n          type: types.GET_CHARACTER,\r\n          payload: {\r\n            charaExists: false,\r\n            loading: false,\r\n          },\r\n        });\r\n      }\r\n    });\r\n};\r\n\r\nexport const addCharacter = (data) => (dispatch) => {\r\n  dispatch({ type: types.ADD_CHARACTER, payload: { loading: true } });\r\n\r\n  let charaId = \"\";\r\n  db.collection(\"characters\")\r\n    .add({\r\n      ...data,\r\n      image: typeof data.image === \"string\" ? data.image : \"\",\r\n      createdAt: firebase.firestore.FieldValue.serverTimestamp(),\r\n      likesCount: 0,\r\n      likes: [],\r\n      dislikes: [],\r\n    })\r\n    .then((res) => {\r\n      charaId = res.id;\r\n      const imageName = `${res.id}${\"_\"}${data.firstname.toLowerCase()}${\r\n        data.lastname && \"_\"\r\n      }${data.lastname && data.lastname.toLowerCase()}`;\r\n\r\n      if (typeof data.image === \"object\") {\r\n        storage\r\n          .ref(`${auth.currentUser.uid}/${imageName}`)\r\n          .put(data.image)\r\n          .then(() => {\r\n            return storage\r\n              .ref(auth.currentUser.uid)\r\n              .child(imageName)\r\n              .getDownloadURL();\r\n          })\r\n          .then((url) => {\r\n            return db\r\n              .collection(\"characters\")\r\n              .doc(charaId)\r\n              .update({ image: url });\r\n          })\r\n          .then(() => {\r\n            message.success(\"Character added successfully\");\r\n            dispatch({\r\n              type: types.ADD_CHARACTER,\r\n              payload: {\r\n                message: \"Character added successfully\",\r\n                characterId: charaId,\r\n                loading: false,\r\n              },\r\n            });\r\n          });\r\n      } else {\r\n        message.success(\"Character added successfully\");\r\n        dispatch({\r\n          type: types.ADD_CHARACTER,\r\n          payload: {\r\n            message: \"Character added successfully\",\r\n            characterId: charaId,\r\n            loading: false,\r\n          },\r\n        });\r\n      }\r\n    })\r\n    .catch((err) => {\r\n      message.error(err.message);\r\n    });\r\n};\r\n\r\nexport const editCharacter = (data, id) => (dispatch) => {\r\n  dispatch({ type: types.EDIT_CHARACTER, payload: { loadingCharacter: true } });\r\n\r\n  const imageName = `${id}${\"_\"}${data.firstname.toLowerCase()}${\r\n    data.lastname && \"_\"\r\n  }${data.lastname && data.lastname.toLowerCase()}`;\r\n\r\n  if (data.image && typeof data.image === \"object\") {\r\n    storage\r\n      .ref(`${auth.currentUser.uid}/${imageName}`)\r\n      .put(data.image)\r\n      .then(() => {\r\n        return storage\r\n          .ref(auth.currentUser.uid)\r\n          .child(imageName)\r\n          .getDownloadURL();\r\n      })\r\n      .then((url) => {\r\n        return db\r\n          .collection(\"characters\")\r\n          .doc(id)\r\n          .update({\r\n            ...data,\r\n            image: url,\r\n            relativesArr: data.relatives.map((c) => c.character_id),\r\n          });\r\n      })\r\n      .then(() => {\r\n        dispatch({\r\n          type: types.EDIT_CHARACTER,\r\n          payload: {\r\n            message: \"Character edited successfully\",\r\n            loadingCharacter: false,\r\n          },\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        message.error(err.message);\r\n      });\r\n  } else {\r\n    db.collection(\"characters\")\r\n      .doc(id)\r\n      .update({\r\n        ...data,\r\n        relativesArr: data.relatives.map((c) => c.character_id),\r\n      })\r\n      .then(() => {\r\n        dispatch({\r\n          type: types.EDIT_CHARACTER,\r\n          payload: {\r\n            message: \"Character edited successfully\",\r\n            loadingCharacter: false,\r\n          },\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        message.error(err.message);\r\n      });\r\n  }\r\n};\r\n\r\nexport const deleteCharacter = (id, firstname, lastname) => (dispatch) => {\r\n  dispatch({ type: types.DELETE_CHARACTER, payload: { loading: true } });\r\n  const imageName = `${id}${\"_\"}${firstname.toLowerCase()}${lastname && \"_\"}${\r\n    lastname && lastname.toLowerCase()\r\n  }`;\r\n  const batch = db.batch();\r\n  db.collection(\"characters\")\r\n    .doc(id)\r\n    .delete()\r\n    .then(() => {\r\n      if (storage.ref(`${auth.currentUser.uid}/${imageName}`)) {\r\n        return storage.ref(`${auth.currentUser.uid}/${imageName}`).delete();\r\n      }\r\n    })\r\n    .then(() => {\r\n      db.collection(\"chapters\")\r\n        .where(\"characters\", \"array-contains\", id)\r\n        .get()\r\n        .then((docs) => {\r\n          docs.forEach((doc) => {\r\n            batch.update(db.collection(\"chapters\").doc(doc.id), {\r\n              characters: doc.data().characters.filter((c) => c !== id),\r\n            });\r\n          });\r\n        })\r\n        .then(() => {\r\n          db.collection(\"stories\")\r\n            .where(\"secondaryArr\", \"array-contains\", id)\r\n            .get()\r\n            .then((stories) => {\r\n              stories.forEach((story) => {\r\n                batch.update(db.collection(\"stories\").doc(story.id), {\r\n                  mainCharacters: story\r\n                    .data()\r\n                    .mainCharacters.filter((c) => c !== id),\r\n                  secondaryArr: story\r\n                    .data()\r\n                    .secondaryArr.filter((c) => c !== id),\r\n                  secondaryCharacters: story\r\n                    .data()\r\n                    .secondaryCharacters.filter((c) => c.id !== id),\r\n                });\r\n              });\r\n            })\r\n            .then(() => {\r\n              db.collection(\"characters\")\r\n                .where(\"relativesArr\", \"array-contains\", id)\r\n                .get()\r\n                .then((characters) => {\r\n                  characters.forEach((char) => {\r\n                    batch.update(db.collection(\"characters\").doc(char.id), {\r\n                      relativesArr: char\r\n                        .data()\r\n                        .relativesArr.filter((c) => c !== id),\r\n                      relatives: char\r\n                        .data()\r\n                        .relatives.filter((c) => c.character_id !== id),\r\n                    });\r\n                  });\r\n                })\r\n                .then(() => {\r\n                  db.collection(\"charactersLikes\")\r\n                    .where(\"characterId\", \"==\", id)\r\n                    .get()\r\n                    .then((likes) => {\r\n                      likes.forEach((like) => {\r\n                        batch.delete(\r\n                          db.collection(\"charactersLikes\").doc(like.id)\r\n                        );\r\n                      });\r\n                      batch.commit().then(() => {\r\n                        dispatch({\r\n                          type: types.DELETE_CHARACTER,\r\n                          payload: {\r\n                            message: \"Character deleted successfully\",\r\n                            loading: false,\r\n                            deleted: true,\r\n                            charaExists: false,\r\n                          },\r\n                        });\r\n                      });\r\n                    });\r\n                });\r\n            });\r\n        });\r\n    });\r\n};\r\n\r\nexport const getUserCharacters = (userId) => (dispatch) => {\r\n  db.collection(\"characters\")\r\n    .where(\"authorId\", \"==\", userId)\r\n    .get()\r\n    .then((docs) => {\r\n      let items = [];\r\n      docs.forEach((doc) => {\r\n        items = [...items, { id: doc.id, ...doc.data() }];\r\n      });\r\n      return items;\r\n    })\r\n    .then((items) => {\r\n      dispatch({ type: types.GET_USER_CHARACTERS, payload: items });\r\n    });\r\n};\r\n\r\nexport const getFavoriteCharacters = () => (dispatch) => {\r\n  db.collection(\"charactersLikes\")\r\n    .where(\"senderId\", \"==\", auth.currentUser.uid)\r\n    .get()\r\n    .then((docs) => {\r\n      let favArr = [];\r\n      docs.forEach((doc) => {\r\n        favArr = [...favArr, doc.data().characterId];\r\n      });\r\n      return favArr;\r\n    })\r\n    .then((users) => {\r\n      const result = users.map((user) =>\r\n        db.collection(\"characters\").doc(user).get()\r\n      );\r\n      Promise.all(result).then((res) => {\r\n        let favUsers = [];\r\n        res.forEach(\r\n          (doc) => (favUsers = [...favUsers, { id: doc.id, ...doc.data() }])\r\n        );\r\n        dispatch({\r\n          type: types.GET_FAVORITE_CHARACTERS,\r\n          payload: favUsers,\r\n        });\r\n      });\r\n    });\r\n};\r\n\r\nexport const getCharactersInStory = (id) => (dispatch) => {\r\n  db.collection(\"stories\")\r\n    .doc(id)\r\n    .onSnapshot((doc) => {\r\n      dispatch({\r\n        type: types.GET_STORY_CHARACTERS,\r\n        payload: {\r\n          secondaryCharacters: doc.data().secondaryCharacters,\r\n          mainArr: doc.data().mainCharacters,\r\n        },\r\n      });\r\n    });\r\n};\r\n"]},"metadata":{},"sourceType":"module"}