{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Utilisateur\\\\Documents\\\\CODE\\\\kronikea-master\\\\pages\\\\story\\\\[id]\\\\index.js\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport { useRouter } from \"next/router\";\nimport { Row, Col, message } from \"antd\";\nimport { connect } from \"react-redux\";\nimport { getStory, getChapters, getStoryCharacters, deleteChapter, isStoryFavorite, addStoryToFavorite, removeStoryFromFavorite, getLocations } from \"../../../redux/actions/storiesActions\";\nimport { useAuth } from \"../../../hooks/userHooks\";\nimport CharacterCard from \"../../../components/common/CharacterCard\";\nimport LocationCard from \"../../../components/common/LocationCard\";\nimport WithLink from \"../../../components/hoc/WithLink\";\nimport RedirectComp from \"../../../components/hoc/RedirectComp\";\nimport LoadingScreen from \"../../../components/hoc/LoadingScreen\";\nimport Chapters from \"../../../components/story/Chapters\";\nimport Banner from \"../../../components/story/Banner\";\nimport { CharacterGrid } from \"../../../components/common/Grid\";\n\nconst Story = ({\n  getStory,\n  getLocations,\n  story,\n  loading,\n  getChapters,\n  chapters,\n  getStoryCharacters,\n  deleteChapter,\n  actionMessage,\n  isStoryFavorite,\n  isFavorite,\n  addStoryToFavorite,\n  storyExists,\n  loadingFav,\n  removeStoryFromFavorite\n}) => {\n  const router = useRouter();\n  const auth = useAuth();\n  React.useEffect(() => {\n    getStory(router.query.id);\n    getChapters(router.query.id);\n    getStoryCharacters(router.query.id);\n\n    if (!auth.isLoading) {\n      isStoryFavorite(router.query.id);\n    }\n  }, [router.query.id, auth]);\n  React.useEffect(() => {\n    if (actionMessage) {\n      message.success(actionMessage);\n      getChapters(router.query.id);\n    }\n  }, [actionMessage]);\n\n  const deleteChapterFunc = id => {\n    deleteChapter(id, router.query.id);\n  };\n\n  return __jsx(LoadingScreen, {\n    loading: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 5\n    }\n  }, __jsx(LoadingScreen, {\n    loading: loadingFav,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }, __jsx(RedirectComp, {\n    type: \"404\",\n    condition: storyExists,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, __jsx(RedirectComp, {\n    type: \"403\",\n    condition: story.public,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: \"story\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }, __jsx(Row, {\n    gutter: 24,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 15\n    }\n  }, __jsx(Banner, {\n    loading: loading,\n    story: story,\n    id: router.query.id,\n    isFavorite: isFavorite,\n    addStoryToFavorite: addStoryToFavorite,\n    removeStoryFromFavorite: removeStoryFromFavorite,\n    auth: auth,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 17\n    }\n  }), __jsx(Col, {\n    sm: 24,\n    md: 16,\n    lg: 18,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: \"story-chapters\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 19\n    }\n  }, __jsx(Chapters, {\n    chapters: chapters,\n    id: router.query.id,\n    deleteChapter: deleteChapterFunc,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 21\n    }\n  }), __jsx(\"h3\", {\n    className: \"heading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 21\n    }\n  }, \"Main Characters\"), __jsx(CharacterGrid, {\n    gutter: [24, 16],\n    xxl: 4,\n    xl: 4,\n    lg: 4,\n    md: 6,\n    sm: 8,\n    xs: 12,\n    type: \"show\",\n    characters: story.mainCharacters,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  }), __jsx(\"h3\", {\n    className: \"heading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 21\n    }\n  }, \"Secondary Characters\"), __jsx(CharacterGrid, {\n    gutter: [24, 16],\n    xxl: 4,\n    xl: 4,\n    lg: 4,\n    md: 6,\n    sm: 8,\n    xs: 12,\n    type: \"show\",\n    characters: story.secondaryCharacters,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 21\n    }\n  }), __jsx(\"h3\", {\n    className: \"heading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 21\n    }\n  }, \"Locations\"), __jsx(Row, {\n    gutter: [24, 16],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 21\n    }\n  }, __jsx(Col, {\n    xs: 12,\n    sm: 8,\n    md: 6,\n    lg: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 23\n    }\n  }, __jsx(LocationCard, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 25\n    }\n  })), __jsx(Col, {\n    xs: 12,\n    sm: 8,\n    md: 6,\n    lg: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 23\n    }\n  }, __jsx(LocationCard, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 25\n    }\n  })), __jsx(Col, {\n    xs: 12,\n    sm: 8,\n    md: 6,\n    lg: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 23\n    }\n  }, __jsx(LocationCard, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 25\n    }\n  })), __jsx(Col, {\n    xs: 12,\n    sm: 8,\n    md: 6,\n    lg: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 23\n    }\n  }, __jsx(LocationCard, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 25\n    }\n  })), __jsx(Col, {\n    xs: 12,\n    sm: 8,\n    md: 6,\n    lg: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 23\n    }\n  }, __jsx(LocationCard, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 25\n    }\n  })), __jsx(Col, {\n    xs: 12,\n    sm: 8,\n    md: 6,\n    lg: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 23\n    }\n  }, __jsx(LocationCard, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 25\n    }\n  })))))))))));\n};\n\nconst mapStateToProps = state => ({\n  story: state.stories.story,\n  loading: state.stories.loading,\n  chapters: state.stories.chapters,\n  actionMessage: state.stories.message,\n  loadingChapter: state.stories.loadingChapter,\n  isFavorite: state.stories.isFavorite,\n  storyExists: state.stories.storyExists,\n  loadingFav: state.stories.loadingFav\n});\n\nexport default connect(mapStateToProps, {\n  getStory,\n  getChapters,\n  getStoryCharacters,\n  deleteChapter,\n  isStoryFavorite,\n  addStoryToFavorite,\n  removeStoryFromFavorite,\n  getLocations\n})(Story);","map":{"version":3,"sources":["C:/Users/Utilisateur/Documents/CODE/kronikea-master/pages/story/[id]/index.js"],"names":["React","useRouter","Row","Col","message","connect","getStory","getChapters","getStoryCharacters","deleteChapter","isStoryFavorite","addStoryToFavorite","removeStoryFromFavorite","getLocations","useAuth","CharacterCard","LocationCard","WithLink","RedirectComp","LoadingScreen","Chapters","Banner","CharacterGrid","Story","story","loading","chapters","actionMessage","isFavorite","storyExists","loadingFav","router","auth","useEffect","query","id","isLoading","success","deleteChapterFunc","public","mainCharacters","secondaryCharacters","mapStateToProps","state","stories","loadingChapter"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { useRouter } from \"next/router\";\r\nimport { Row, Col, message } from \"antd\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport {\r\n  getStory,\r\n  getChapters,\r\n  getStoryCharacters,\r\n  deleteChapter,\r\n  isStoryFavorite,\r\n  addStoryToFavorite,\r\n  removeStoryFromFavorite,\r\n  getLocations,\r\n} from \"../../../redux/actions/storiesActions\";\r\nimport { useAuth } from \"../../../hooks/userHooks\";\r\n\r\nimport CharacterCard from \"../../../components/common/CharacterCard\";\r\nimport LocationCard from \"../../../components/common/LocationCard\";\r\nimport WithLink from \"../../../components/hoc/WithLink\";\r\nimport RedirectComp from \"../../../components/hoc/RedirectComp\";\r\nimport LoadingScreen from \"../../../components/hoc/LoadingScreen\";\r\nimport Chapters from \"../../../components/story/Chapters\";\r\nimport Banner from \"../../../components/story/Banner\";\r\nimport { CharacterGrid } from \"../../../components/common/Grid\";\r\n\r\nconst Story = ({\r\n  getStory,\r\n  getLocations,\r\n  story,\r\n  loading,\r\n  getChapters,\r\n  chapters,\r\n  getStoryCharacters,\r\n  deleteChapter,\r\n  actionMessage,\r\n  isStoryFavorite,\r\n  isFavorite,\r\n  addStoryToFavorite,\r\n  storyExists,\r\n  loadingFav,\r\n  removeStoryFromFavorite,\r\n}) => {\r\n  const router = useRouter();\r\n  const auth = useAuth();\r\n\r\n  React.useEffect(() => {\r\n    getStory(router.query.id);\r\n    getChapters(router.query.id);\r\n    getStoryCharacters(router.query.id);\r\n    if (!auth.isLoading) {\r\n      isStoryFavorite(router.query.id);\r\n    }\r\n  }, [router.query.id, auth]);\r\n\r\n  React.useEffect(() => {\r\n    if (actionMessage) {\r\n      message.success(actionMessage);\r\n      getChapters(router.query.id);\r\n    }\r\n  }, [actionMessage]);\r\n\r\n  const deleteChapterFunc = (id) => {\r\n    deleteChapter(id, router.query.id);\r\n  };\r\n\r\n  return (\r\n    <LoadingScreen loading={loading}>\r\n      <LoadingScreen loading={loadingFav}>\r\n        <RedirectComp type=\"404\" condition={storyExists}>\r\n          <RedirectComp type=\"403\" condition={story.public}>\r\n            <div className=\"story\">\r\n              <Row gutter={24}>\r\n                <Banner\r\n                  loading={loading}\r\n                  story={story}\r\n                  id={router.query.id}\r\n                  isFavorite={isFavorite}\r\n                  addStoryToFavorite={addStoryToFavorite}\r\n                  removeStoryFromFavorite={removeStoryFromFavorite}\r\n                  auth={auth}\r\n                />\r\n                <Col sm={24} md={16} lg={18}>\r\n                  <div className=\"story-chapters\">\r\n                    <Chapters\r\n                      chapters={chapters}\r\n                      id={router.query.id}\r\n                      deleteChapter={deleteChapterFunc}\r\n                    />\r\n                    <h3 className=\"heading\">Main Characters</h3>\r\n                    <CharacterGrid\r\n                      gutter={[24, 16]}\r\n                      xxl={4}\r\n                      xl={4}\r\n                      lg={4}\r\n                      md={6}\r\n                      sm={8}\r\n                      xs={12}\r\n                      type=\"show\"\r\n                      characters={story.mainCharacters}\r\n                    />\r\n                    <h3 className=\"heading\">Secondary Characters</h3>\r\n                    <CharacterGrid\r\n                      gutter={[24, 16]}\r\n                      xxl={4}\r\n                      xl={4}\r\n                      lg={4}\r\n                      md={6}\r\n                      sm={8}\r\n                      xs={12}\r\n                      type=\"show\"\r\n                      characters={story.secondaryCharacters}\r\n                    />\r\n                    <h3 className=\"heading\">Locations</h3>\r\n                    <Row gutter={[24, 16]}>\r\n                      <Col xs={12} sm={8} md={6} lg={4}>\r\n                        <LocationCard />\r\n                      </Col>\r\n                      <Col xs={12} sm={8} md={6} lg={4}>\r\n                        <LocationCard />\r\n                      </Col>\r\n                      <Col xs={12} sm={8} md={6} lg={4}>\r\n                        <LocationCard />\r\n                      </Col>\r\n                      <Col xs={12} sm={8} md={6} lg={4}>\r\n                        <LocationCard />\r\n                      </Col>\r\n                      <Col xs={12} sm={8} md={6} lg={4}>\r\n                        <LocationCard />\r\n                      </Col>\r\n                      <Col xs={12} sm={8} md={6} lg={4}>\r\n                        <LocationCard />\r\n                      </Col>\r\n                    </Row>\r\n                  </div>\r\n                </Col>\r\n              </Row>\r\n            </div>\r\n          </RedirectComp>\r\n        </RedirectComp>\r\n      </LoadingScreen>\r\n    </LoadingScreen>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  story: state.stories.story,\r\n  loading: state.stories.loading,\r\n  chapters: state.stories.chapters,\r\n  actionMessage: state.stories.message,\r\n  loadingChapter: state.stories.loadingChapter,\r\n  isFavorite: state.stories.isFavorite,\r\n  storyExists: state.stories.storyExists,\r\n  loadingFav: state.stories.loadingFav,\r\n});\r\n\r\nexport default connect(mapStateToProps, {\r\n  getStory,\r\n  getChapters,\r\n  getStoryCharacters,\r\n  deleteChapter,\r\n  isStoryFavorite,\r\n  addStoryToFavorite,\r\n  removeStoryFromFavorite,\r\n  getLocations,\r\n})(Story);\r\n"]},"metadata":{},"sourceType":"module"}