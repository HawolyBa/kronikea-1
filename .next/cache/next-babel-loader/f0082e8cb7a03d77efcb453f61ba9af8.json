{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\Utilisateur\\\\Documents\\\\CODE\\\\kronikea-master\\\\components\\\\forms\\\\StoryForm.js\";\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from \"react\";\nimport { Row, Col, Divider, Form, Spin, Input, Select, message } from \"antd\";\nimport { CATEGORIES, COPYRIGHTS, LANGUAGES, STATUS } from \"../../utils/constants\";\nimport Tags from \"../../components/forms/Tags\";\nimport RadioButton from \"../../components/forms/RadioButton\";\nimport ItemSelector from \"./ItemSelector\";\nimport ImageRow from \"./ImageRow\";\nvar Option = Select.Option;\n\nvar StoryForm = function StoryForm(_ref) {\n  var type = _ref.type,\n      story = _ref.story,\n      form = _ref.form,\n      submit = _ref.submit,\n      loading = _ref.loading,\n      storyId = _ref.storyId,\n      characters = _ref.characters,\n      mature = _ref.mature,\n      setMature = _ref.setMature,\n      visibility = _ref.visibility,\n      setVisibility = _ref.setVisibility,\n      loadingStory = _ref.loadingStory,\n      deleteStory = _ref.deleteStory;\n\n  var filterSort = function filterSort(a, b) {\n    var keyA = a.name,\n        keyB = b.name;\n    if (keyA < keyB) return -1;\n    if (keyA > keyB) return 1;\n    return 0;\n  };\n\n  var onFailed = function onFailed() {\n    window.scrollTo(0, 0);\n    message.error(\"There are some errors\");\n  };\n\n  return __jsx(Form, {\n    layout: \"vertical\",\n    scrollToFirstError: true,\n    onFinishFailed: onFailed,\n    onFinish: submit,\n    form: form,\n    initialValues: type === \"add\" ? {\n      summary: \"\",\n      mature: false,\n      \"public\": true,\n      banner: \"\",\n      mainCharacters: [],\n      tags: [],\n      title: \"\",\n      categories: [],\n      copyright: \"\",\n      language: \"\",\n      status: \"\",\n      imageCopyright: \"\"\n    } : _objectSpread(_objectSpread({}, story), {}, {\n      mainCharacters: story.mainArr\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 5\n    }\n  }, __jsx(Row, {\n    gutter: [24, 24],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }, __jsx(Col, {\n    sm: 24,\n    xs: 24,\n    md: 18,\n    lg: 18,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, __jsx(Form.Item, {\n    colon: false,\n    name: \"title\",\n    rules: [{\n      required: true,\n      message: \"A title is required\"\n    }, {\n      max: 65\n    }],\n    label: \"Title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 11\n    }\n  }, __jsx(Input, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }))), __jsx(Col, {\n    sm: 24,\n    xs: 24,\n    lg: 6,\n    md: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, __jsx(Form.Item, {\n    name: \"categories\",\n    label: \"Categories\",\n    rules: [{\n      required: true,\n      message: \"At least 1 category is required\"\n    }, {\n      max: 2,\n      type: \"array\",\n      message: \"You can only select up to 2 categories\"\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 11\n    }\n  }, __jsx(Select, {\n    mode: \"multiple\",\n    allowClear: true,\n    maxTagCount: 2,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  }, CATEGORIES === null || CATEGORIES === void 0 ? void 0 : CATEGORIES.sort(function (a, b) {\n    var keyA = a.name,\n        keyB = b.name; // Compare the 2 dates\n\n    if (keyA < keyB) return -1;\n    if (keyA > keyB) return 1;\n    return 0;\n  }).map(function (cat) {\n    return __jsx(Option, {\n      value: cat.value,\n      key: cat.value,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }\n    }, cat.name);\n  }))))), __jsx(Row, {\n    gutter: [24, 24],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }\n  }, __jsx(Col, {\n    md: 8,\n    sm: 24,\n    xs: 24,\n    lg: 8,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }\n  }, __jsx(Form.Item, {\n    name: \"language\",\n    label: \"Language\",\n    rules: [{\n      required: true,\n      message: \"A language is required\"\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 11\n    }\n  }, __jsx(Select, {\n    showSearch: true,\n    filterSort: filterSort,\n    filterOption: function filterOption(input, option) {\n      return option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0;\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }\n  }, LANGUAGES === null || LANGUAGES === void 0 ? void 0 : LANGUAGES.map(function (lang) {\n    return __jsx(Option, {\n      value: lang.value,\n      key: lang.value,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }\n    }, lang.name);\n  })))), __jsx(Col, {\n    md: 8,\n    sm: 24,\n    xs: 24,\n    lg: 8,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 9\n    }\n  }, __jsx(Form.Item, {\n    name: \"status\",\n    label: \"Status\",\n    rules: [{\n      required: true,\n      message: \"A status is required\"\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 11\n    }\n  }, __jsx(Select, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 13\n    }\n  }, STATUS.map(function (stat) {\n    return __jsx(Option, {\n      value: stat.value,\n      key: stat.value,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }\n    }, stat.name);\n  })))), __jsx(Col, {\n    md: 8,\n    sm: 24,\n    xs: 24,\n    lg: 8,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 9\n    }\n  }, __jsx(Form.Item, {\n    name: \"copyright\",\n    label: \"Copyright\",\n    rules: [{\n      required: true,\n      message: \"A copyright is required\"\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 11\n    }\n  }, __jsx(Select, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 13\n    }\n  }, COPYRIGHTS.map(function (copy) {\n    return __jsx(Option, {\n      value: copy.value,\n      key: copy.value,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 17\n      }\n    }, copy.name);\n  }))))), __jsx(Form.Item, {\n    label: \"Summary\",\n    name: \"summary\",\n    rules: [{\n      max: 180,\n      message: \"Your summary cannot exceed 180 characters\"\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 7\n    }\n  }, __jsx(Input.TextArea, {\n    autoSize: {\n      minRows: 5\n    },\n    showCount: true,\n    maxLength: 180,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 9\n    }\n  })), __jsx(Row, {\n    justify: \"space-between\",\n    gutter: [24, 24],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 7\n    }\n  }, __jsx(RadioButton, {\n    lg: 4,\n    sm: 12,\n    xs: 24,\n    md: 8,\n    name: \"public\",\n    label: \"Visibility\",\n    setFunc: setVisibility,\n    num1: \"3\",\n    num2: \"4\",\n    label1: \"Public\",\n    label2: \"Private\",\n    val: visibility,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 9\n    }\n  }), __jsx(RadioButton, {\n    lg: 4,\n    sm: 12,\n    xs: 24,\n    md: 8,\n    val: mature,\n    setFunc: setMature,\n    name: \"mature\",\n    label: \"Mature content ?\",\n    num1: \"1\",\n    num2: \"2\",\n    label1: \"Yes\",\n    label2: \"No\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 9\n    }\n  }), __jsx(Col, {\n    lg: 8,\n    md: 12,\n    sm: 24,\n    xs: 24,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 9\n    }\n  }, __jsx(Tags, {\n    form: form,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 11\n    }\n  }))), __jsx(Divider, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 7\n    }\n  }), __jsx(ItemSelector, {\n    item: story && story.mainArr,\n    subject: characters,\n    form: form,\n    arrInForm: \"mainCharacters\",\n    label: \"Main Characters\",\n    type: \"story\",\n    lg1: 12,\n    subjectType: \"characters\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 7\n    }\n  }), __jsx(Divider, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 7\n    }\n  }), __jsx(ImageRow, {\n    name: \"banner\",\n    form: form,\n    itemImage: story === null || story === void 0 ? void 0 : story.banner,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 7\n    }\n  }), __jsx(Divider, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 7\n    }\n  }), type === \"add\" ? loading || storyId ? __jsx(\"button\", {\n    disabled: true,\n    className: \"spin-btn\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 11\n    }\n  }, __jsx(Spin, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 13\n    }\n  })) : __jsx(\"button\", {\n    type: \"submit\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 11\n    }\n  }, \"Create\") : loadingStory ? __jsx(\"button\", {\n    disabled: true,\n    className: \"spin-btn\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 9\n    }\n  }, __jsx(Spin, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 11\n    }\n  })) : __jsx(Row, {\n    gutter: [32, 16],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 9\n    }\n  }, __jsx(Col, {\n    md: 16,\n    sm: 24,\n    xs: 24,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 11\n    }\n  }, __jsx(\"button\", {\n    type: \"submit\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 13\n    }\n  }, \"Edit\")), __jsx(Col, {\n    md: 8,\n    sm: 24,\n    xs: 24,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 11\n    }\n  }, __jsx(Popconfirm, {\n    title: \"Do you really want to delete this character ?\",\n    onConfirm: function onConfirm() {\n      return deleteStory(story.id);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 13\n    }\n  }, __jsx(\"button\", {\n    className: \"delete-btn\",\n    type: \"button\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 15\n    }\n  }, \"Delete\")))));\n};\n\n_c = StoryForm;\nexport default StoryForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"StoryForm\");","map":{"version":3,"sources":["C:/Users/Utilisateur/Documents/CODE/kronikea-master/components/forms/StoryForm.js"],"names":["React","Row","Col","Divider","Form","Spin","Input","Select","message","CATEGORIES","COPYRIGHTS","LANGUAGES","STATUS","Tags","RadioButton","ItemSelector","ImageRow","Option","StoryForm","type","story","form","submit","loading","storyId","characters","mature","setMature","visibility","setVisibility","loadingStory","deleteStory","filterSort","a","b","keyA","name","keyB","onFailed","window","scrollTo","error","summary","banner","mainCharacters","tags","title","categories","copyright","language","status","imageCopyright","mainArr","required","max","sort","map","cat","value","input","option","children","toLowerCase","indexOf","lang","stat","copy","minRows","id"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Row, Col, Divider, Form, Spin, Input, Select, message } from \"antd\";\r\n\r\nimport {\r\n  CATEGORIES,\r\n  COPYRIGHTS,\r\n  LANGUAGES,\r\n  STATUS,\r\n} from \"../../utils/constants\";\r\n\r\nimport Tags from \"../../components/forms/Tags\";\r\nimport RadioButton from \"../../components/forms/RadioButton\";\r\nimport ItemSelector from \"./ItemSelector\";\r\nimport ImageRow from \"./ImageRow\";\r\n\r\nconst { Option } = Select;\r\n\r\nconst StoryForm = ({\r\n  type,\r\n  story,\r\n  form,\r\n  submit,\r\n  loading,\r\n  storyId,\r\n  characters,\r\n  mature,\r\n  setMature,\r\n  visibility,\r\n  setVisibility,\r\n  loadingStory,\r\n  deleteStory,\r\n}) => {\r\n  const filterSort = (a, b) => {\r\n    const keyA = a.name,\r\n      keyB = b.name;\r\n    if (keyA < keyB) return -1;\r\n    if (keyA > keyB) return 1;\r\n    return 0;\r\n  };\r\n\r\n  const onFailed = () => {\r\n    window.scrollTo(0, 0);\r\n    message.error(\"There are some errors\");\r\n  };\r\n\r\n  return (\r\n    <Form\r\n      layout=\"vertical\"\r\n      scrollToFirstError\r\n      onFinishFailed={onFailed}\r\n      onFinish={submit}\r\n      form={form}\r\n      initialValues={\r\n        type === \"add\"\r\n          ? {\r\n              summary: \"\",\r\n              mature: false,\r\n              public: true,\r\n              banner: \"\",\r\n              mainCharacters: [],\r\n              tags: [],\r\n              title: \"\",\r\n              categories: [],\r\n              copyright: \"\",\r\n              language: \"\",\r\n              status: \"\",\r\n              imageCopyright: \"\",\r\n            }\r\n          : { ...story, mainCharacters: story.mainArr }\r\n      }\r\n    >\r\n      <Row gutter={[24, 24]}>\r\n        <Col sm={24} xs={24} md={18} lg={18}>\r\n          <Form.Item\r\n            colon={false}\r\n            name=\"title\"\r\n            rules={[\r\n              {\r\n                required: true,\r\n                message: \"A title is required\",\r\n              },\r\n              { max: 65 },\r\n            ]}\r\n            label=\"Title\"\r\n          >\r\n            <Input />\r\n          </Form.Item>\r\n        </Col>\r\n        <Col sm={24} xs={24} lg={6} md={6}>\r\n          <Form.Item\r\n            name=\"categories\"\r\n            label=\"Categories\"\r\n            rules={[\r\n              {\r\n                required: true,\r\n                message: \"At least 1 category is required\",\r\n              },\r\n              {\r\n                max: 2,\r\n                type: \"array\",\r\n                message: \"You can only select up to 2 categories\",\r\n              },\r\n            ]}\r\n          >\r\n            <Select mode=\"multiple\" allowClear maxTagCount={2}>\r\n              {CATEGORIES?.sort((a, b) => {\r\n                const keyA = a.name,\r\n                  keyB = b.name;\r\n                // Compare the 2 dates\r\n                if (keyA < keyB) return -1;\r\n                if (keyA > keyB) return 1;\r\n                return 0;\r\n              }).map((cat) => (\r\n                <Option value={cat.value} key={cat.value}>\r\n                  {cat.name}\r\n                </Option>\r\n              ))}\r\n            </Select>\r\n          </Form.Item>\r\n        </Col>\r\n      </Row>\r\n      <Row gutter={[24, 24]}>\r\n        <Col md={8} sm={24} xs={24} lg={8}>\r\n          <Form.Item\r\n            name=\"language\"\r\n            label=\"Language\"\r\n            rules={[\r\n              {\r\n                required: true,\r\n                message: \"A language is required\",\r\n              },\r\n            ]}\r\n          >\r\n            <Select\r\n              showSearch\r\n              filterSort={filterSort}\r\n              filterOption={(input, option) =>\r\n                option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n              }\r\n            >\r\n              {LANGUAGES?.map((lang) => (\r\n                <Option value={lang.value} key={lang.value}>\r\n                  {lang.name}\r\n                </Option>\r\n              ))}\r\n            </Select>\r\n          </Form.Item>\r\n        </Col>\r\n        <Col md={8} sm={24} xs={24} lg={8}>\r\n          <Form.Item\r\n            name=\"status\"\r\n            label=\"Status\"\r\n            rules={[\r\n              {\r\n                required: true,\r\n                message: \"A status is required\",\r\n              },\r\n            ]}\r\n          >\r\n            <Select>\r\n              {STATUS.map((stat) => (\r\n                <Option value={stat.value} key={stat.value}>\r\n                  {stat.name}\r\n                </Option>\r\n              ))}\r\n            </Select>\r\n          </Form.Item>\r\n        </Col>\r\n        <Col md={8} sm={24} xs={24} lg={8}>\r\n          <Form.Item\r\n            name=\"copyright\"\r\n            label=\"Copyright\"\r\n            rules={[\r\n              {\r\n                required: true,\r\n                message: \"A copyright is required\",\r\n              },\r\n            ]}\r\n          >\r\n            <Select>\r\n              {COPYRIGHTS.map((copy) => (\r\n                <Option value={copy.value} key={copy.value}>\r\n                  {copy.name}\r\n                </Option>\r\n              ))}\r\n            </Select>\r\n          </Form.Item>\r\n        </Col>\r\n      </Row>\r\n      <Form.Item\r\n        label=\"Summary\"\r\n        name=\"summary\"\r\n        rules={[\r\n          {\r\n            max: 180,\r\n            message: \"Your summary cannot exceed 180 characters\",\r\n          },\r\n        ]}\r\n      >\r\n        <Input.TextArea\r\n          autoSize={{ minRows: 5 }}\r\n          showCount={true}\r\n          maxLength={180}\r\n        ></Input.TextArea>\r\n      </Form.Item>\r\n      <Row justify=\"space-between\" gutter={[24, 24]}>\r\n        <RadioButton\r\n          lg={4}\r\n          sm={12}\r\n          xs={24}\r\n          md={8}\r\n          name=\"public\"\r\n          label=\"Visibility\"\r\n          setFunc={setVisibility}\r\n          num1=\"3\"\r\n          num2=\"4\"\r\n          label1=\"Public\"\r\n          label2=\"Private\"\r\n          val={visibility}\r\n        />\r\n        <RadioButton\r\n          lg={4}\r\n          sm={12}\r\n          xs={24}\r\n          md={8}\r\n          val={mature}\r\n          setFunc={setMature}\r\n          name=\"mature\"\r\n          label=\"Mature content ?\"\r\n          num1=\"1\"\r\n          num2=\"2\"\r\n          label1=\"Yes\"\r\n          label2=\"No\"\r\n        />\r\n        <Col lg={8} md={12} sm={24} xs={24}>\r\n          <Tags form={form} />\r\n        </Col>\r\n      </Row>\r\n      <Divider />\r\n      <ItemSelector\r\n        item={story && story.mainArr}\r\n        subject={characters}\r\n        form={form}\r\n        arrInForm=\"mainCharacters\"\r\n        label=\"Main Characters\"\r\n        type=\"story\"\r\n        lg1={12}\r\n        subjectType=\"characters\"\r\n      />\r\n      <Divider />\r\n      <ImageRow name=\"banner\" form={form} itemImage={story?.banner} />\r\n      <Divider />\r\n      {type === \"add\" ? (\r\n        loading || storyId ? (\r\n          <button disabled className=\"spin-btn\">\r\n            <Spin />\r\n          </button>\r\n        ) : (\r\n          <button type=\"submit\">Create</button>\r\n        )\r\n      ) : loadingStory ? (\r\n        <button disabled className=\"spin-btn\">\r\n          <Spin />\r\n        </button>\r\n      ) : (\r\n        <Row gutter={[32, 16]}>\r\n          <Col md={16} sm={24} xs={24}>\r\n            <button type=\"submit\">Edit</button>\r\n          </Col>\r\n          <Col md={8} sm={24} xs={24}>\r\n            <Popconfirm\r\n              title=\"Do you really want to delete this character ?\"\r\n              onConfirm={() => deleteStory(story.id)}\r\n            >\r\n              <button className=\"delete-btn\" type=\"button\">\r\n                Delete\r\n              </button>\r\n            </Popconfirm>\r\n          </Col>\r\n        </Row>\r\n      )}\r\n    </Form>\r\n  );\r\n};\r\n\r\nexport default StoryForm;\r\n"]},"metadata":{},"sourceType":"module"}