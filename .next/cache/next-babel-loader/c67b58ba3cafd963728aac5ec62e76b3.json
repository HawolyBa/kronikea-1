{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Utilisateur\\\\Documents\\\\CODE\\\\kronikea-master\\\\pages\\\\story\\\\[id]\\\\chapter\\\\[chapid]\\\\index.js\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport Link from \"next/link\";\nimport { connect } from \"react-redux\";\nimport { useRouter } from \"next/router\";\nimport { Divider, Space, PageHeader, Tooltip, Spin } from \"antd\";\nimport { dummy } from \"../../../../../utils/dummy\";\nimport { useAuth } from \"../../../../../hooks/userHooks\";\nimport { getChapter, getComments, submitComment } from \"../../../../../redux/actions/storiesActions\";\nimport Comments from \"../../../../../components/chapter/Comments\";\nimport LoadingScreen from \"../../../../../components/hoc/LoadingScreen\";\nimport RedirectComp from \"../../../../../components/hoc/RedirectComp\";\nimport { CharacterGrid, LocationGrid } from \"../../../../../components/common/Grid\";\n\nconst Chapter = props => {\n  const router = useRouter();\n  const auth = useAuth();\n  const {\n    loading,\n    chapter,\n    loadingComments,\n    comments,\n    chapterExists\n  } = props;\n  const [commentBody, setCommentBody] = React.useState(\"\");\n  const [characters, setCharacters] = React.useState([]);\n  React.useEffect(() => {\n    props.getChapter(router.query.id, router.query.chapid, \"show\");\n    props.getComments(router.query.chapid);\n  }, [router.query.id, router.query.chapid]);\n  React.useEffect(() => {\n    if (chapter.characters) {\n      setCharacters(chapter.characters.filter(c => c.public || c.authorId === auth.user.uid));\n    }\n  }, [chapter]);\n\n  const submit = () => {\n    props.submitComment({\n      content: commentBody,\n      username: auth.user.username,\n      userId: auth.user.uid,\n      answer: false,\n      chapterId: router.query.chapid,\n      storyId: router.query.id\n    });\n  };\n\n  return __jsx(LoadingScreen, {\n    loading: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 5\n    }\n  }, __jsx(RedirectComp, {\n    condition: chapterExists,\n    type: \"404\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }, __jsx(RedirectComp, {\n    condition: chapter.public || auth.user && auth.user.uid === chapter.authorId,\n    type: \"403\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"main-chapter\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: \"chapter-page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }\n  }, __jsx(Tooltip, {\n    title: \"Next Chapter\",\n    placement: \"bottom\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 15\n    }\n  }, __jsx(\"div\", {\n    className: \"icon custom-icon nav-btn next-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }\n  }, __jsx(\"ion-icon\", {\n    name: \"chevron-forward-circle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 19\n    }\n  }))), __jsx(Tooltip, {\n    title: \"Previous Chapter\",\n    placement: \"bottom\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 15\n    }\n  }, __jsx(\"div\", {\n    className: \"icon custom-icon nav-btn prev-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 17\n    }\n  }, __jsx(\"ion-icon\", {\n    name: \"chevron-back-circle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 19\n    }\n  }))), __jsx(PageHeader, {\n    className: \"site-page-header\",\n    onBack: () => router.push(`/story/${router.query.id}`),\n    title: \"Back to story\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 15\n    }\n  }), __jsx(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 15\n    }\n  }, chapter.number, \". \", chapter.title), __jsx(\"div\", {\n    className: \"meta\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 15\n    }\n  }, __jsx(Divider, {\n    orientation: \"left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 17\n    }\n  }, __jsx(Link, {\n    href: \"/profile/1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 19\n    }\n  }, __jsx(\"a\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 21\n    }\n  }, __jsx(Space, {\n    direction: \"vertical\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 23\n    }\n  }, __jsx(\"div\", {\n    className: \"avatar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 25\n    }\n  }, __jsx(\"img\", {\n    src: dummy.person,\n    alt: dummy.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 27\n    }\n  })), __jsx(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 25\n    }\n  }, chapter.authorName)))))), __jsx(\"section\", {\n    className: \"chapter-content\",\n    dangerouslySetInnerHTML: {\n      __html: chapter.body\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 15\n    }\n  }), __jsx(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 15\n    }\n  }), loadingComments ? __jsx(Spin, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 17\n    }\n  }) : __jsx(Comments, {\n    submit: submit,\n    commentBody: commentBody,\n    setCommentBody: setCommentBody,\n    auth: auth,\n    comments: comments,\n    responseBody: responseBody,\n    setResponseBody: setResponseBody,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 17\n    }\n  })), __jsx(\"div\", {\n    className: \"main-chapter-details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }\n  }, __jsx(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 15\n    }\n  }, \"Characters in this chapter\"), __jsx(CharacterGrid, {\n    gutter: [12, 12],\n    characters: characters,\n    type: \"show\",\n    lg: 12,\n    md: 12,\n    sm: 12,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 15\n    }\n  }), __jsx(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 15\n    }\n  }), __jsx(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 15\n    }\n  }, \"Locations in this chapter\"), __jsx(LocationGrid, {\n    gutter: [12, 12],\n    lg: 12,\n    md: 12,\n    sm: 12,\n    xs: 12,\n    type: \"story\",\n    locations: chapter.locations,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 15\n    }\n  }))))));\n};\n\nconst mapStateToProps = state => ({\n  chapter: state.stories.chapter,\n  loading: state.stories.loading,\n  comments: state.stories.comments,\n  loadingComments: state.stories.loadingComments,\n  chapterExists: state.stories.chapterExists,\n  message: state.stories.message\n});\n\nexport default connect(mapStateToProps, {\n  getChapter,\n  getComments,\n  submitComment\n})(Chapter);","map":{"version":3,"sources":["C:/Users/Utilisateur/Documents/CODE/kronikea-master/pages/story/[id]/chapter/[chapid]/index.js"],"names":["React","Link","connect","useRouter","Divider","Space","PageHeader","Tooltip","Spin","dummy","useAuth","getChapter","getComments","submitComment","Comments","LoadingScreen","RedirectComp","CharacterGrid","LocationGrid","Chapter","props","router","auth","loading","chapter","loadingComments","comments","chapterExists","commentBody","setCommentBody","useState","characters","setCharacters","useEffect","query","id","chapid","filter","c","public","authorId","user","uid","submit","content","username","userId","answer","chapterId","storyId","push","number","title","person","name","authorName","__html","body","responseBody","setResponseBody","locations","mapStateToProps","state","stories","message"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Link from \"next/link\";\r\nimport { connect } from \"react-redux\";\r\nimport { useRouter } from \"next/router\";\r\nimport { Divider, Space, PageHeader, Tooltip, Spin } from \"antd\";\r\n\r\nimport { dummy } from \"../../../../../utils/dummy\";\r\nimport { useAuth } from \"../../../../../hooks/userHooks\";\r\nimport {\r\n  getChapter,\r\n  getComments,\r\n  submitComment,\r\n} from \"../../../../../redux/actions/storiesActions\";\r\n\r\nimport Comments from \"../../../../../components/chapter/Comments\";\r\nimport LoadingScreen from \"../../../../../components/hoc/LoadingScreen\";\r\nimport RedirectComp from \"../../../../../components/hoc/RedirectComp\";\r\nimport {\r\n  CharacterGrid,\r\n  LocationGrid,\r\n} from \"../../../../../components/common/Grid\";\r\n\r\nconst Chapter = (props) => {\r\n  const router = useRouter();\r\n  const auth = useAuth();\r\n  const { loading, chapter, loadingComments, comments, chapterExists } = props;\r\n\r\n  const [commentBody, setCommentBody] = React.useState(\"\");\r\n\r\n  const [characters, setCharacters] = React.useState([]);\r\n\r\n  React.useEffect(() => {\r\n    props.getChapter(router.query.id, router.query.chapid, \"show\");\r\n    props.getComments(router.query.chapid);\r\n  }, [router.query.id, router.query.chapid]);\r\n\r\n  React.useEffect(() => {\r\n    if (chapter.characters) {\r\n      setCharacters(\r\n        chapter.characters.filter(\r\n          (c) => c.public || c.authorId === auth.user.uid\r\n        )\r\n      );\r\n    }\r\n  }, [chapter]);\r\n\r\n  const submit = () => {\r\n    props.submitComment({\r\n      content: commentBody,\r\n      username: auth.user.username,\r\n      userId: auth.user.uid,\r\n      answer: false,\r\n      chapterId: router.query.chapid,\r\n      storyId: router.query.id,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <LoadingScreen loading={loading}>\r\n      <RedirectComp condition={chapterExists} type=\"404\">\r\n        <RedirectComp\r\n          condition={\r\n            chapter.public || (auth.user && auth.user.uid === chapter.authorId)\r\n          }\r\n          type=\"403\"\r\n        >\r\n          <div className=\"main-chapter\">\r\n            <div className=\"chapter-page\">\r\n              <Tooltip title=\"Next Chapter\" placement=\"bottom\">\r\n                <div className=\"icon custom-icon nav-btn next-btn\">\r\n                  <ion-icon name=\"chevron-forward-circle\"></ion-icon>\r\n                </div>\r\n              </Tooltip>\r\n              <Tooltip title=\"Previous Chapter\" placement=\"bottom\">\r\n                <div className=\"icon custom-icon nav-btn prev-btn\">\r\n                  <ion-icon name=\"chevron-back-circle\"></ion-icon>\r\n                </div>\r\n              </Tooltip>\r\n              <PageHeader\r\n                className=\"site-page-header\"\r\n                onBack={() => router.push(`/story/${router.query.id}`)}\r\n                title=\"Back to story\"\r\n              />\r\n              <h2>\r\n                {chapter.number}. {chapter.title}\r\n              </h2>\r\n              <div className=\"meta\">\r\n                <Divider orientation=\"left\">\r\n                  <Link href=\"/profile/1\">\r\n                    <a>\r\n                      <Space direction=\"vertical\" align=\"center\">\r\n                        <div className=\"avatar\">\r\n                          <img src={dummy.person} alt={dummy.name} />\r\n                        </div>\r\n                        <h5>{chapter.authorName}</h5>\r\n                      </Space>\r\n                    </a>\r\n                  </Link>\r\n                </Divider>\r\n              </div>\r\n              <section\r\n                className=\"chapter-content\"\r\n                dangerouslySetInnerHTML={{ __html: chapter.body }}\r\n              ></section>\r\n              <Divider />\r\n              {loadingComments ? (\r\n                <Spin />\r\n              ) : (\r\n                <Comments\r\n                  submit={submit}\r\n                  commentBody={commentBody}\r\n                  setCommentBody={setCommentBody}\r\n                  auth={auth}\r\n                  comments={comments}\r\n                  responseBody={responseBody}\r\n                  setResponseBody={setResponseBody}\r\n                />\r\n              )}\r\n            </div>\r\n            <div className=\"main-chapter-details\">\r\n              <h3>Characters in this chapter</h3>\r\n              <CharacterGrid\r\n                gutter={[12, 12]}\r\n                characters={characters}\r\n                type=\"show\"\r\n                lg={12}\r\n                md={12}\r\n                sm={12}\r\n                xs={12}\r\n              />\r\n              <Divider />\r\n              <h3>Locations in this chapter</h3>\r\n              <LocationGrid\r\n                gutter={[12, 12]}\r\n                lg={12}\r\n                md={12}\r\n                sm={12}\r\n                xs={12}\r\n                type=\"story\"\r\n                locations={chapter.locations}\r\n              />\r\n            </div>\r\n          </div>\r\n        </RedirectComp>\r\n      </RedirectComp>\r\n    </LoadingScreen>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  chapter: state.stories.chapter,\r\n  loading: state.stories.loading,\r\n  comments: state.stories.comments,\r\n  loadingComments: state.stories.loadingComments,\r\n  chapterExists: state.stories.chapterExists,\r\n  message: state.stories.message,\r\n});\r\n\r\nexport default connect(mapStateToProps, {\r\n  getChapter,\r\n  getComments,\r\n  submitComment,\r\n})(Chapter);\r\n"]},"metadata":{},"sourceType":"module"}