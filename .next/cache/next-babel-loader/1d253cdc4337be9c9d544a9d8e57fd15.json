{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\Utilisateur\\\\Documents\\\\CODE\\\\kronikea-master\\\\components\\\\forms\\\\UploadImage.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { Upload, message, Form, Input } from \"antd\";\nimport { LoadingOutlined, PlusOutlined, StarOutlined } from \"@ant-design/icons\";\n\nfunction getBase64(img, callback) {\n  var reader = new FileReader();\n  reader.addEventListener(\"load\", function () {\n    return callback(reader.result);\n  });\n  reader.readAsDataURL(img);\n}\n\nfunction beforeUpload(file) {\n  var isJpgOrPng = file.type === \"image/jpeg\" || file.type === \"image/png\";\n\n  if (!isJpgOrPng) {\n    message.error(\"You can only upload JPG/PNG file!\");\n  }\n\n  var isLt2M = file.size / 1024 / 1024 < 2;\n\n  if (!isLt2M) {\n    message.error(\"Image must smaller than 2MB!\");\n  }\n\n  return isJpgOrPng && isLt2M;\n}\n\nvar UploadImage = function UploadImage(_ref) {\n  _s();\n\n  var _jsx;\n\n  var form = _ref.form;\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      loading = _React$useState2[0],\n      setLoading = _React$useState2[1];\n\n  var _React$useState3 = React.useState(\"\"),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      imageUrl = _React$useState4[0],\n      setImageUrl = _React$useState4[1];\n\n  var handleChange = function handleChange(info) {\n    if (info.file.status === \"uploading\") {\n      setLoading(true);\n      return;\n    }\n\n    if (info.file.status === \"done\") {\n      form.setFieldsValue({\n        banner: info.file.originFileObj\n      }); // setImage(info.file.originFileObj);\n\n      getBase64(info.file.originFileObj, function (imageUrl) {\n        setLoading(false);\n        setImageUrl(imageUrl);\n      });\n    }\n  };\n\n  var uploadButton = __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 5\n    }\n  }, loading ? __jsx(LoadingOutlined, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 18\n    }\n  }) : __jsx(PlusOutlined, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 40\n    }\n  }), __jsx(\"div\", {\n    style: {\n      marginTop: 8\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }\n  }, \"Upload\"));\n\n  return __jsx(React.Fragment, null, __jsx(Form.Item, {\n    name: \"banner\",\n    label: \"Upload a cover\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"upload-image\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }, __jsx(Upload, (_jsx = {\n    disabled: form.getFieldValue(\"image\") ? true : false,\n    showUploadList: {\n      showRemoveIcon: true,\n      removeIcon: __jsx(StarOutlined, {\n        onClick: function onClick(e) {\n          return console.log(e, \"custom removeIcon event\");\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 17\n        }\n      })\n    },\n    name: \"banner\",\n    listType: \"picture-card\",\n    className: \"cover-uploader\"\n  }, _defineProperty(_jsx, \"showUploadList\", false), _defineProperty(_jsx, \"beforeUpload\", beforeUpload), _defineProperty(_jsx, \"onChange\", handleChange), _defineProperty(_jsx, \"__self\", _this), _defineProperty(_jsx, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 11\n  }), _jsx), imageUrl ? __jsx(\"img\", {\n    src: imageUrl,\n    alt: \"image\",\n    style: {\n      width: \"100%\",\n      height: \"100%\",\n      objectFit: \"cover\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 15\n    }\n  }) : uploadButton))), __jsx(Form.Item, {\n    label: \"Image Copyright\",\n    name: \"imageCopyright\",\n    rules: [{\n      required: form.getFieldValue(\"banner\") ? true : false,\n      message: \"An image copyright is required\"\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }\n  }, __jsx(Input, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  })));\n};\n\n_s(UploadImage, \"7yQhdChm1Mdi1pob2qgJNn4VZG8=\");\n\n_c = UploadImage;\nexport default UploadImage;\n\nvar _c;\n\n$RefreshReg$(_c, \"UploadImage\");","map":{"version":3,"sources":["C:/Users/Utilisateur/Documents/CODE/kronikea-master/components/forms/UploadImage.js"],"names":["Upload","message","Form","Input","LoadingOutlined","PlusOutlined","StarOutlined","getBase64","img","callback","reader","FileReader","addEventListener","result","readAsDataURL","beforeUpload","file","isJpgOrPng","type","error","isLt2M","size","UploadImage","form","React","useState","loading","setLoading","imageUrl","setImageUrl","handleChange","info","status","setFieldsValue","banner","originFileObj","uploadButton","marginTop","getFieldValue","showRemoveIcon","removeIcon","e","console","log","width","height","objectFit","required"],"mappings":"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","sourcesContent":["import { Upload, message, Form, Input } from \"antd\";\r\nimport { LoadingOutlined, PlusOutlined, StarOutlined } from \"@ant-design/icons\";\r\n\r\nfunction getBase64(img, callback) {\r\n  const reader = new FileReader();\r\n  reader.addEventListener(\"load\", () => callback(reader.result));\r\n  reader.readAsDataURL(img);\r\n}\r\n\r\nfunction beforeUpload(file) {\r\n  const isJpgOrPng = file.type === \"image/jpeg\" || file.type === \"image/png\";\r\n  if (!isJpgOrPng) {\r\n    message.error(\"You can only upload JPG/PNG file!\");\r\n  }\r\n  const isLt2M = file.size / 1024 / 1024 < 2;\r\n  if (!isLt2M) {\r\n    message.error(\"Image must smaller than 2MB!\");\r\n  }\r\n  return isJpgOrPng && isLt2M;\r\n}\r\n\r\nconst UploadImage = ({ form }) => {\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [imageUrl, setImageUrl] = React.useState(\"\");\r\n\r\n  const handleChange = (info) => {\r\n    if (info.file.status === \"uploading\") {\r\n      setLoading(true);\r\n      return;\r\n    }\r\n    if (info.file.status === \"done\") {\r\n      form.setFieldsValue({ banner: info.file.originFileObj });\r\n      // setImage(info.file.originFileObj);\r\n      getBase64(info.file.originFileObj, (imageUrl) => {\r\n        setLoading(false);\r\n        setImageUrl(imageUrl);\r\n      });\r\n    }\r\n  };\r\n\r\n  const uploadButton = (\r\n    <div>\r\n      {loading ? <LoadingOutlined /> : <PlusOutlined />}\r\n      <div style={{ marginTop: 8 }}>Upload</div>\r\n    </div>\r\n  );\r\n  return (\r\n    <>\r\n      <Form.Item name=\"banner\" label=\"Upload a cover\">\r\n        <div className=\"upload-image\">\r\n          <Upload\r\n            disabled={form.getFieldValue(\"image\") ? true : false}\r\n            showUploadList={{\r\n              showRemoveIcon: true,\r\n              removeIcon: (\r\n                <StarOutlined\r\n                  onClick={(e) => console.log(e, \"custom removeIcon event\")}\r\n                />\r\n              ),\r\n            }}\r\n            name=\"banner\"\r\n            listType=\"picture-card\"\r\n            className=\"cover-uploader\"\r\n            showUploadList={false}\r\n            beforeUpload={beforeUpload}\r\n            onChange={handleChange}\r\n          >\r\n            {imageUrl ? (\r\n              <img\r\n                src={imageUrl}\r\n                alt=\"image\"\r\n                style={{ width: \"100%\", height: \"100%\", objectFit: \"cover\" }}\r\n              />\r\n            ) : (\r\n              uploadButton\r\n            )}\r\n          </Upload>\r\n        </div>\r\n      </Form.Item>\r\n      <Form.Item\r\n        label=\"Image Copyright\"\r\n        name=\"imageCopyright\"\r\n        rules={[\r\n          {\r\n            required: form.getFieldValue(\"banner\") ? true : false,\r\n            message: \"An image copyright is required\",\r\n          },\r\n        ]}\r\n      >\r\n        <Input />\r\n      </Form.Item>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default UploadImage;\r\n"]},"metadata":{},"sourceType":"module"}