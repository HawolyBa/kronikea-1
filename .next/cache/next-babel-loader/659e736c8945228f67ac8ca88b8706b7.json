{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\Utilisateur\\\\Documents\\\\CODE\\\\kronikea-master\\\\pages\\\\story\\\\[id]\\\\edit.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from \"react\";\nimport { Row, Col, Divider, Form, Spin, message, Input, Select } from \"antd\";\nimport { connect } from \"react-redux\";\nimport { useRouter } from \"next/router\";\nimport isImageUrl from \"is-image-url\";\nimport { CATEGORIES, COPYRIGHTS, LANGUAGES, STATUS } from \"../../../utils/constants\";\nimport { useAuth } from \"../../../hooks/userHooks\";\nimport { getUserCharacters } from \"../../../redux/actions/charactersActions\";\nimport { getStory, editStory } from \"../../../redux/actions/storiesActions\";\nimport Loader from \"../../../components/common/Loader\";\nimport RadioButton from \"../../components/forms/RadioButton\";\n\nvar EditStory = function EditStory(props) {\n  _s();\n\n  var auth = useAuth();\n  var router = useRouter();\n  var story = props.story,\n      loading = props.loading;\n\n  var _Form$useForm = Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      mature = _React$useState2[0],\n      setMature = _React$useState2[1];\n\n  var _React$useState3 = React.useState(true),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      visibility = _React$useState4[0],\n      setVisibility = _React$useState4[1]; // React.useEffect(() => {\n  //   if (auth.user) {\n  //     // props.getUserCharacters();\n  //   }\n  // }, [auth]);\n\n\n  React.useEffect(function () {\n    if (router.query.id) {\n      props.getStory(router.query.id);\n    }\n  }, [router.query.id]);\n\n  var submit = function submit(values) {\n    console.log(values);\n  };\n\n  var onFailed = function onFailed() {};\n\n  console.log(story.title);\n\n  var filterSort = function filterSort(a, b) {\n    var keyA = a.name,\n        keyB = b.name;\n    if (keyA < keyB) return -1;\n    if (keyA > keyB) return 1;\n    return 0;\n  };\n\n  return !loading && story.title ? __jsx(\"div\", {\n    className: \"new-story custom-form\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"inner\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, __jsx(\"h2\", {\n    className: \"side-heading\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }, \"Edit story: \", story.title), __jsx(Form, {\n    layout: \"vertical\",\n    scrollToFirstError: true,\n    onFinishFailed: onFailed,\n    onFinish: submit,\n    form: form,\n    initialValues: _objectSpread({}, story),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, __jsx(Row, {\n    gutter: [24, 24],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }, __jsx(Col, {\n    sm: 24,\n    xs: 24,\n    md: 18,\n    lg: 18,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }\n  }, __jsx(Form.Item, {\n    colon: false,\n    name: \"title\",\n    rules: [{\n      required: true,\n      message: \"A title is required\"\n    }, {\n      max: 65\n    }],\n    label: \"Title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 15\n    }\n  }, __jsx(Input, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 17\n    }\n  }))), __jsx(Col, {\n    sm: 24,\n    xs: 24,\n    lg: 6,\n    md: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }, __jsx(Form.Item, {\n    name: \"categories\",\n    label: \"Categories\",\n    rules: [{\n      required: true,\n      message: \"At least 1 category is required\"\n    }, {\n      max: 2,\n      type: \"array\",\n      message: \"You can only select up to 2 categories\"\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 15\n    }\n  }, __jsx(Select, {\n    mode: \"multiple\",\n    allowClear: true,\n    maxTagCount: 2,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }, CATEGORIES === null || CATEGORIES === void 0 ? void 0 : CATEGORIES.sort(function (a, b) {\n    var keyA = a.name,\n        keyB = b.name; // Compare the 2 dates\n\n    if (keyA < keyB) return -1;\n    if (keyA > keyB) return 1;\n    return 0;\n  }).map(function (cat) {\n    return __jsx(Option, {\n      value: cat.value,\n      key: cat.value,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 21\n      }\n    }, cat.name);\n  }))))), __jsx(Row, {\n    gutter: [24, 24],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 11\n    }\n  }, __jsx(Col, {\n    md: 8,\n    sm: 24,\n    xs: 24,\n    lg: 8,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }\n  }, __jsx(Form.Item, {\n    name: \"language\",\n    label: \"Language\",\n    rules: [{\n      required: true,\n      message: \"A language is required\"\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 15\n    }\n  }, __jsx(Select, {\n    filterSort: filterSort,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 17\n    }\n  }, LANGUAGES === null || LANGUAGES === void 0 ? void 0 : LANGUAGES.map(function (lang) {\n    return __jsx(Option, {\n      value: lang.value,\n      key: lang.value,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 21\n      }\n    }, lang.name);\n  })))), __jsx(Col, {\n    md: 8,\n    sm: 24,\n    xs: 24,\n    lg: 8,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }\n  }, __jsx(Form.Item, {\n    name: \"status\",\n    label: \"Status\",\n    rules: [{\n      required: true,\n      message: \"A status is required\"\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 15\n    }\n  }, __jsx(Select, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 17\n    }\n  }, STATUS.map(function (stat) {\n    return __jsx(Option, {\n      value: stat.value,\n      key: stat.value,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 21\n      }\n    }, stat.name);\n  })))), __jsx(Col, {\n    md: 8,\n    sm: 24,\n    xs: 24,\n    lg: 8,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }\n  }, __jsx(Form.Item, {\n    name: \"copyright\",\n    label: \"Copyright\",\n    rules: [{\n      required: true,\n      message: \"A copyright is required\"\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 15\n    }\n  }, __jsx(Select, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 17\n    }\n  }, COPYRIGHTS.map(function (copy) {\n    return __jsx(Option, {\n      value: copy.value,\n      key: copy.value,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 21\n      }\n    }, copy.name);\n  }))))), __jsx(Form.Item, {\n    label: \"Summary\",\n    name: \"summary\",\n    rules: [{\n      max: 180,\n      message: \"Your summary cannot exceed 180 characters\"\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 11\n    }\n  }, __jsx(Input.TextArea, {\n    autoSize: {\n      minRows: 5\n    },\n    showCount: true,\n    maxLength: 180,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }\n  })), __jsx(Row, {\n    justify: \"space-between\",\n    gutter: [24, 24],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 11\n    }\n  }, __jsx(RadioButton, {\n    lg: 4,\n    sm: 12,\n    xs: 24,\n    md: 8,\n    name: \"public\",\n    label: \"Visibility\",\n    setFunc: setVisibility,\n    num1: \"3\",\n    num2: \"4\",\n    label1: \"Public\",\n    label2: \"Private\",\n    val: visibility,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 13\n    }\n  }))))) : __jsx(Loader, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 5\n    }\n  });\n};\n\n_s(EditStory, \"L/DycLeb1FRe57Mh2FBQBjMdklU=\", false, function () {\n  return [useAuth, useRouter, Form.useForm];\n});\n\n_c = EditStory;\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    characters: state.characters.userCharacters,\n    confirmMessage: state.stories.message,\n    storyId: state.stories.storyId,\n    loading: state.stories.loadingStory,\n    story: state.stories.story\n  };\n};\n\nexport default connect(mapStateToProps, {\n  getUserCharacters: getUserCharacters,\n  editStory: editStory,\n  getStory: getStory\n})(EditStory);\n\nvar _c;\n\n$RefreshReg$(_c, \"EditStory\");","map":{"version":3,"sources":["C:/Users/Utilisateur/Documents/CODE/kronikea-master/pages/story/[id]/edit.js"],"names":["React","Row","Col","Divider","Form","Spin","message","Input","Select","connect","useRouter","isImageUrl","CATEGORIES","COPYRIGHTS","LANGUAGES","STATUS","useAuth","getUserCharacters","getStory","editStory","Loader","RadioButton","EditStory","props","auth","router","story","loading","useForm","form","useState","mature","setMature","visibility","setVisibility","useEffect","query","id","submit","values","console","log","onFailed","title","filterSort","a","b","keyA","name","keyB","required","max","type","sort","map","cat","value","lang","stat","copy","minRows","mapStateToProps","state","characters","userCharacters","confirmMessage","stories","storyId","loadingStory"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Row, Col, Divider, Form, Spin, message, Input, Select } from \"antd\";\r\nimport { connect } from \"react-redux\";\r\nimport { useRouter } from \"next/router\";\r\nimport isImageUrl from \"is-image-url\";\r\n\r\nimport {\r\n  CATEGORIES,\r\n  COPYRIGHTS,\r\n  LANGUAGES,\r\n  STATUS,\r\n} from \"../../../utils/constants\";\r\nimport { useAuth } from \"../../../hooks/userHooks\";\r\nimport { getUserCharacters } from \"../../../redux/actions/charactersActions\";\r\nimport { getStory, editStory } from \"../../../redux/actions/storiesActions\";\r\nimport Loader from \"../../../components/common/Loader\";\r\n\r\nimport RadioButton from \"../../components/forms/RadioButton\";\r\n\r\nconst EditStory = (props) => {\r\n  const auth = useAuth();\r\n  const router = useRouter();\r\n  const { story, loading } = props;\r\n  const [form] = Form.useForm();\r\n\r\n  const [mature, setMature] = React.useState(false);\r\n  const [visibility, setVisibility] = React.useState(true);\r\n\r\n  // React.useEffect(() => {\r\n  //   if (auth.user) {\r\n  //     // props.getUserCharacters();\r\n  //   }\r\n  // }, [auth]);\r\n\r\n  React.useEffect(() => {\r\n    if (router.query.id) {\r\n      props.getStory(router.query.id);\r\n    }\r\n  }, [router.query.id]);\r\n\r\n  const submit = (values) => {\r\n    console.log(values);\r\n  };\r\n  const onFailed = () => {};\r\n\r\n  console.log(story.title);\r\n\r\n  const filterSort = (a, b) => {\r\n    const keyA = a.name,\r\n      keyB = b.name;\r\n    if (keyA < keyB) return -1;\r\n    if (keyA > keyB) return 1;\r\n    return 0;\r\n  };\r\n\r\n  return !loading && story.title ? (\r\n    <div className=\"new-story custom-form\">\r\n      <div className=\"inner\">\r\n        <h2 className=\"side-heading\">Edit story: {story.title}</h2>\r\n        <Form\r\n          layout=\"vertical\"\r\n          scrollToFirstError\r\n          onFinishFailed={onFailed}\r\n          onFinish={submit}\r\n          form={form}\r\n          initialValues={{ ...story }}\r\n        >\r\n          <Row gutter={[24, 24]}>\r\n            <Col sm={24} xs={24} md={18} lg={18}>\r\n              <Form.Item\r\n                colon={false}\r\n                name=\"title\"\r\n                rules={[\r\n                  {\r\n                    required: true,\r\n                    message: \"A title is required\",\r\n                  },\r\n                  { max: 65 },\r\n                ]}\r\n                label=\"Title\"\r\n              >\r\n                <Input />\r\n              </Form.Item>\r\n            </Col>\r\n            <Col sm={24} xs={24} lg={6} md={6}>\r\n              <Form.Item\r\n                name=\"categories\"\r\n                label=\"Categories\"\r\n                rules={[\r\n                  {\r\n                    required: true,\r\n                    message: \"At least 1 category is required\",\r\n                  },\r\n                  {\r\n                    max: 2,\r\n                    type: \"array\",\r\n                    message: \"You can only select up to 2 categories\",\r\n                  },\r\n                ]}\r\n              >\r\n                <Select mode=\"multiple\" allowClear maxTagCount={2}>\r\n                  {CATEGORIES?.sort((a, b) => {\r\n                    const keyA = a.name,\r\n                      keyB = b.name;\r\n                    // Compare the 2 dates\r\n                    if (keyA < keyB) return -1;\r\n                    if (keyA > keyB) return 1;\r\n                    return 0;\r\n                  }).map((cat) => (\r\n                    <Option value={cat.value} key={cat.value}>\r\n                      {cat.name}\r\n                    </Option>\r\n                  ))}\r\n                </Select>\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n          <Row gutter={[24, 24]}>\r\n            <Col md={8} sm={24} xs={24} lg={8}>\r\n              <Form.Item\r\n                name=\"language\"\r\n                label=\"Language\"\r\n                rules={[\r\n                  {\r\n                    required: true,\r\n                    message: \"A language is required\",\r\n                  },\r\n                ]}\r\n              >\r\n                <Select filterSort={filterSort}>\r\n                  {LANGUAGES?.map((lang) => (\r\n                    <Option value={lang.value} key={lang.value}>\r\n                      {lang.name}\r\n                    </Option>\r\n                  ))}\r\n                </Select>\r\n              </Form.Item>\r\n            </Col>\r\n            <Col md={8} sm={24} xs={24} lg={8}>\r\n              <Form.Item\r\n                name=\"status\"\r\n                label=\"Status\"\r\n                rules={[\r\n                  {\r\n                    required: true,\r\n                    message: \"A status is required\",\r\n                  },\r\n                ]}\r\n              >\r\n                <Select>\r\n                  {STATUS.map((stat) => (\r\n                    <Option value={stat.value} key={stat.value}>\r\n                      {stat.name}\r\n                    </Option>\r\n                  ))}\r\n                </Select>\r\n              </Form.Item>\r\n            </Col>\r\n            <Col md={8} sm={24} xs={24} lg={8}>\r\n              <Form.Item\r\n                name=\"copyright\"\r\n                label=\"Copyright\"\r\n                rules={[\r\n                  {\r\n                    required: true,\r\n                    message: \"A copyright is required\",\r\n                  },\r\n                ]}\r\n              >\r\n                <Select>\r\n                  {COPYRIGHTS.map((copy) => (\r\n                    <Option value={copy.value} key={copy.value}>\r\n                      {copy.name}\r\n                    </Option>\r\n                  ))}\r\n                </Select>\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n          <Form.Item\r\n            label=\"Summary\"\r\n            name=\"summary\"\r\n            rules={[\r\n              {\r\n                max: 180,\r\n                message: \"Your summary cannot exceed 180 characters\",\r\n              },\r\n            ]}\r\n          >\r\n            <Input.TextArea\r\n              autoSize={{ minRows: 5 }}\r\n              showCount={true}\r\n              maxLength={180}\r\n            ></Input.TextArea>\r\n          </Form.Item>\r\n          <Row justify=\"space-between\" gutter={[24, 24]}>\r\n            <RadioButton\r\n              lg={4}\r\n              sm={12}\r\n              xs={24}\r\n              md={8}\r\n              name=\"public\"\r\n              label=\"Visibility\"\r\n              setFunc={setVisibility}\r\n              num1=\"3\"\r\n              num2=\"4\"\r\n              label1=\"Public\"\r\n              label2=\"Private\"\r\n              val={visibility}\r\n            />\r\n          </Row>\r\n        </Form>\r\n      </div>\r\n    </div>\r\n  ) : (\r\n    <Loader />\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  characters: state.characters.userCharacters,\r\n  confirmMessage: state.stories.message,\r\n  storyId: state.stories.storyId,\r\n  loading: state.stories.loadingStory,\r\n  story: state.stories.story,\r\n});\r\n\r\nexport default connect(mapStateToProps, {\r\n  getUserCharacters,\r\n  editStory,\r\n  getStory,\r\n})(EditStory);\r\n"]},"metadata":{},"sourceType":"module"}